{"C:\\Users\\karry\\IdeaProjects\\project_team170\\src\\controller\\IInsightFacade.ts":{"path":"C:\\Users\\karry\\IdeaProjects\\project_team170\\src\\controller\\IInsightFacade.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":113}},"2":{"start":{"line":5,"column":0},"end":{"line":8,"column":89}},"3":{"start":{"line":6,"column":4},"end":{"line":6,"column":48}},"4":{"start":{"line":7,"column":4},"end":{"line":7,"column":42}},"5":{"start":{"line":11,"column":8},"end":{"line":11,"column":23}},"6":{"start":{"line":12,"column":8},"end":{"line":12,"column":52}},"7":{"start":{"line":15,"column":0},"end":{"line":15,"column":36}},"8":{"start":{"line":18,"column":8},"end":{"line":18,"column":23}},"9":{"start":{"line":19,"column":8},"end":{"line":19,"column":53}},"10":{"start":{"line":22,"column":0},"end":{"line":22,"column":38}},"11":{"start":{"line":25,"column":8},"end":{"line":25,"column":23}},"12":{"start":{"line":26,"column":8},"end":{"line":26,"column":59}},"13":{"start":{"line":29,"column":0},"end":{"line":29,"column":50}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":1},"end":{"line":5,"column":2}},"loc":{"start":{"line":5,"column":31},"end":{"line":8,"column":1}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":4},"end":{"line":10,"column":5}},"loc":{"start":{"line":10,"column":25},"end":{"line":13,"column":5}},"line":10},"2":{"name":"(anonymous_2)","decl":{"start":{"line":17,"column":4},"end":{"line":17,"column":5}},"loc":{"start":{"line":17,"column":25},"end":{"line":20,"column":5}},"line":17},"3":{"name":"(anonymous_3)","decl":{"start":{"line":24,"column":4},"end":{"line":24,"column":5}},"loc":{"start":{"line":24,"column":25},"end":{"line":27,"column":5}},"line":24}},"branchMap":{"0":{"loc":{"start":{"line":8,"column":24},"end":{"line":8,"column":87}},"type":"binary-expr","locations":[{"start":{"line":8,"column":24},"end":{"line":8,"column":50}},{"start":{"line":8,"column":55},"end":{"line":8,"column":86}}],"line":8}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":34,"6":34,"7":1,"8":2,"9":2,"10":1,"11":2,"12":2,"13":1},"f":{"0":1,"1":34,"2":2,"3":2},"b":{"0":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/karry/IdeaProjects/project_team170/src/controller/IInsightFacade.ts","sources":["C:/Users/karry/IdeaProjects/project_team170/src/controller/IInsightFacade.ts"],"names":[],"mappings":";;;AAMA,IAAY,kBAGX;AAHD,WAAY,kBAAkB;IAC7B,2CAAqB,CAAA;IACrB,qCAAe,CAAA;AAChB,CAAC,EAHW,kBAAkB,GAAlB,0BAAkB,KAAlB,0BAAkB,QAG7B;AAYD,MAAa,YAAa,SAAQ,KAAK;IACtC,YAAY,OAAgB;QAC3B,KAAK,CAAC,OAAO,CAAC,CAAC;QACf,KAAK,CAAC,iBAAiB,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC;IAC7C,CAAC;CACD;AALD,oCAKC;AAED,MAAa,aAAc,SAAQ,KAAK;IACvC,YAAY,OAAgB;QAC3B,KAAK,CAAC,OAAO,CAAC,CAAC;QACf,KAAK,CAAC,iBAAiB,CAAC,IAAI,EAAE,aAAa,CAAC,CAAC;IAC9C,CAAC;CACD;AALD,sCAKC;AAED,MAAa,mBAAoB,SAAQ,KAAK;IAC7C,YAAY,OAAgB;QAC3B,KAAK,CAAC,OAAO,CAAC,CAAC;QACf,KAAK,CAAC,iBAAiB,CAAC,IAAI,EAAE,mBAAmB,CAAC,CAAC;IACpD,CAAC;CACD;AALD,kDAKC","sourcesContent":["/*\r\n * This is the primary high-level API for the project. In this folder there should be:\r\n * A class called InsightFacade, this should be in a file called InsightFacade.ts.\r\n * You should not change this interface at all or the test suite will not work.\r\n */\r\n\r\nexport enum InsightDatasetKind {\r\n\tSections = \"sections\",\r\n\tRooms = \"rooms\",\r\n}\r\n\r\nexport interface InsightDataset {\r\n\tid: string;\r\n\tkind: InsightDatasetKind;\r\n\tnumRows: number;\r\n}\r\n\r\nexport interface InsightResult {\r\n\t[key: string]: string | number;\r\n}\r\n\r\nexport class InsightError extends Error {\r\n\tconstructor(message?: string) {\r\n\t\tsuper(message);\r\n\t\tError.captureStackTrace(this, InsightError);\r\n\t}\r\n}\r\n\r\nexport class NotFoundError extends Error {\r\n\tconstructor(message?: string) {\r\n\t\tsuper(message);\r\n\t\tError.captureStackTrace(this, NotFoundError);\r\n\t}\r\n}\r\n\r\nexport class ResultTooLargeError extends Error {\r\n\tconstructor(message?: string) {\r\n\t\tsuper(message);\r\n\t\tError.captureStackTrace(this, ResultTooLargeError);\r\n\t}\r\n}\r\n\r\nexport interface IInsightFacade {\r\n\t/**\r\n\t * Add a dataset to insightUBC.\r\n\t *\r\n\t * @param id  The id of the dataset being added. Follows the format /^[^_]+$/\r\n\t * @param content  The base64 content of the dataset. This content should be in the form of a serialized zip file.\r\n\t * @param kind  The kind of the dataset\r\n\t *\r\n\t * @return Promise <string[]>\r\n\t *\r\n\t * The promise should fulfill on a successful add, reject for any failures.\r\n\t * The promise should fulfill with a string array,\r\n\t * containing the ids of all currently added datasets upon a successful add.\r\n\t * The promise should reject with an InsightError describing the error.\r\n\t *\r\n\t * An id is invalid if it contains an underscore, or is only whitespace characters.\r\n\t * If id is the same as the id of an already added dataset, the dataset should be rejected and not saved.\r\n\t *\r\n\t * After receiving the dataset, it should be processed into a data structure of\r\n\t * your design. The processed data structure should be persisted to disk; your\r\n\t * system should be able to load this persisted value into memory for answering\r\n\t * queries.\r\n\t *\r\n\t * Ultimately, a dataset must be added or loaded from disk before queries can\r\n\t * be successfully answered.\r\n\t */\r\n\taddDataset(id: string, content: string, kind: InsightDatasetKind): Promise<string[]>;\r\n\r\n\t/**\r\n\t * Remove a dataset from insightUBC.\r\n\t *\r\n\t * @param id  The id of the dataset to remove. Follows the format /^[^_]+$/\r\n\t *\r\n\t * @return Promise <string>\r\n\t *\r\n\t * The promise should fulfill upon a successful removal, reject on any error.\r\n\t * Attempting to remove a dataset that hasn't been added yet counts as an error.\r\n\t *\r\n\t * An id is invalid if it contains an underscore, or is only whitespace characters.\r\n\t *\r\n\t * The promise should fulfill the id of the dataset that was removed.\r\n\t * The promise should reject with a NotFoundError (if a valid id was not yet added)\r\n\t * or an InsightError (invalid id or any other source of failure) describing the error.\r\n\t *\r\n\t * This will delete both disk and memory caches for the dataset for the id meaning\r\n\t * that subsequent queries for that id should fail unless a new addDataset happens first.\r\n\t */\r\n\tremoveDataset(id: string): Promise<string>;\r\n\r\n\t/**\r\n\t * Perform a query on insightUBC.\r\n\t *\r\n\t * @param query  The query to be performed.\r\n\t *\r\n\t * If a query is incorrectly formatted, references a dataset not added (in memory or on disk),\r\n\t * or references multiple datasets, it should be rejected.\r\n\t *\r\n\t * @return Promise <InsightResult[]>\r\n\t *\r\n\t * The promise should fulfill with an array of results.\r\n\t * The promise should reject with a ResultTooLargeError (if the query returns too many results)\r\n\t * or an InsightError (for any other source of failure) describing the error.\r\n\t */\r\n\tperformQuery(query: unknown): Promise<InsightResult[]>;\r\n\r\n\t/**\r\n\t * List all currently added datasets, their types, and number of rows.\r\n\t *\r\n\t * @return Promise <InsightDataset[]>\r\n\t * The promise should fulfill an array of currently added InsightDatasets, and will only fulfill.\r\n\t */\r\n\tlistDatasets(): Promise<InsightDataset[]>;\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"09c1b7d93373a2f6d96aa63a09b3c550a809b1c6","contentHash":"a209c46dd297814dcb9f485c6e3eb4a0dddeba6532da71953e1940f96bb7b44f"},"C:\\Users\\karry\\IdeaProjects\\project_team170\\src\\controller\\InsightFacade.ts":{"path":"C:\\Users\\karry\\IdeaProjects\\project_team170\\src\\controller\\InsightFacade.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"16":{"start":{"line":19,"column":31},"end":{"line":19,"column":42}},"17":{"start":{"line":20,"column":17},"end":{"line":20,"column":19}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"19":{"start":{"line":21,"column":21},"end":{"line":21,"column":141}},"20":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"21":{"start":{"line":21,"column":109},"end":{"line":21,"column":141}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"23":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"24":{"start":{"line":25,"column":22},"end":{"line":27,"column":1}},"25":{"start":{"line":26,"column":4},"end":{"line":26,"column":62}},"26":{"start":{"line":28,"column":0},"end":{"line":28,"column":62}},"27":{"start":{"line":29,"column":11},"end":{"line":29,"column":38}},"28":{"start":{"line":30,"column":16},"end":{"line":30,"column":49}},"29":{"start":{"line":31,"column":25},"end":{"line":31,"column":52}},"30":{"start":{"line":32,"column":25},"end":{"line":32,"column":62}},"31":{"start":{"line":33,"column":23},"end":{"line":33,"column":58}},"32":{"start":{"line":37,"column":8},"end":{"line":37,"column":34}},"33":{"start":{"line":38,"column":8},"end":{"line":38,"column":21}},"34":{"start":{"line":41,"column":8},"end":{"line":54,"column":9}},"35":{"start":{"line":42,"column":25},"end":{"line":42,"column":49}},"36":{"start":{"line":43,"column":12},"end":{"line":53,"column":13}},"37":{"start":{"line":44,"column":16},"end":{"line":52,"column":17}},"38":{"start":{"line":45,"column":38},"end":{"line":45,"column":63}},"39":{"start":{"line":46,"column":20},"end":{"line":51,"column":21}},"40":{"start":{"line":47,"column":44},"end":{"line":47,"column":101}},"41":{"start":{"line":48,"column":47},"end":{"line":48,"column":70}},"42":{"start":{"line":49,"column":24},"end":{"line":49,"column":69}},"43":{"start":{"line":50,"column":24},"end":{"line":50,"column":69}},"44":{"start":{"line":57,"column":8},"end":{"line":69,"column":9}},"45":{"start":{"line":58,"column":12},"end":{"line":58,"column":39}},"46":{"start":{"line":59,"column":12},"end":{"line":59,"column":36}},"47":{"start":{"line":60,"column":12},"end":{"line":60,"column":38}},"48":{"start":{"line":61,"column":36},"end":{"line":61,"column":70}},"49":{"start":{"line":62,"column":12},"end":{"line":62,"column":50}},"50":{"start":{"line":63,"column":29},"end":{"line":63,"column":61}},"51":{"start":{"line":64,"column":12},"end":{"line":64,"column":47}},"52":{"start":{"line":67,"column":12},"end":{"line":67,"column":31}},"53":{"start":{"line":68,"column":12},"end":{"line":68,"column":41}},"54":{"start":{"line":72,"column":8},"end":{"line":74,"column":9}},"55":{"start":{"line":73,"column":12},"end":{"line":73,"column":74}},"56":{"start":{"line":77,"column":8},"end":{"line":79,"column":9}},"57":{"start":{"line":78,"column":12},"end":{"line":78,"column":76}},"58":{"start":{"line":82,"column":8},"end":{"line":84,"column":9}},"59":{"start":{"line":83,"column":12},"end":{"line":83,"column":80}},"60":{"start":{"line":87,"column":8},"end":{"line":107,"column":9}},"61":{"start":{"line":88,"column":27},"end":{"line":88,"column":29}},"62":{"start":{"line":89,"column":22},"end":{"line":89,"column":43}},"63":{"start":{"line":90,"column":12},"end":{"line":90,"column":77}},"64":{"start":{"line":91,"column":12},"end":{"line":101,"column":15}},"65":{"start":{"line":92,"column":16},"end":{"line":100,"column":17}},"66":{"start":{"line":93,"column":20},"end":{"line":96,"column":21}},"67":{"start":{"line":94,"column":44},"end":{"line":94,"column":64}},"68":{"start":{"line":95,"column":24},"end":{"line":95,"column":51}},"69":{"start":{"line":99,"column":20},"end":{"line":99,"column":115}},"70":{"start":{"line":102,"column":32},"end":{"line":102,"column":59}},"71":{"start":{"line":103,"column":12},"end":{"line":103,"column":31}},"72":{"start":{"line":106,"column":12},"end":{"line":106,"column":71}},"73":{"start":{"line":110,"column":26},"end":{"line":110,"column":28}},"74":{"start":{"line":111,"column":8},"end":{"line":131,"column":9}},"75":{"start":{"line":112,"column":12},"end":{"line":130,"column":13}},"76":{"start":{"line":113,"column":33},"end":{"line":113,"column":48}},"77":{"start":{"line":114,"column":33},"end":{"line":125,"column":19}},"78":{"start":{"line":114,"column":66},"end":{"line":125,"column":17}},"79":{"start":{"line":126,"column":16},"end":{"line":126,"column":59}},"80":{"start":{"line":129,"column":16},"end":{"line":129,"column":75}},"81":{"start":{"line":132,"column":8},"end":{"line":132,"column":43}},"82":{"start":{"line":133,"column":35},"end":{"line":133,"column":62}},"83":{"start":{"line":134,"column":8},"end":{"line":136,"column":9}},"84":{"start":{"line":135,"column":12},"end":{"line":135,"column":35}},"85":{"start":{"line":137,"column":8},"end":{"line":137,"column":80}},"86":{"start":{"line":140,"column":8},"end":{"line":150,"column":9}},"87":{"start":{"line":141,"column":12},"end":{"line":141,"column":39}},"88":{"start":{"line":142,"column":12},"end":{"line":142,"column":29}},"89":{"start":{"line":143,"column":12},"end":{"line":143,"column":37}},"90":{"start":{"line":144,"column":12},"end":{"line":144,"column":52}},"91":{"start":{"line":145,"column":12},"end":{"line":145,"column":39}},"92":{"start":{"line":148,"column":12},"end":{"line":148,"column":31}},"93":{"start":{"line":149,"column":12},"end":{"line":149,"column":41}},"94":{"start":{"line":153,"column":8},"end":{"line":155,"column":9}},"95":{"start":{"line":154,"column":12},"end":{"line":154,"column":82}},"96":{"start":{"line":158,"column":8},"end":{"line":174,"column":9}},"97":{"start":{"line":159,"column":35},"end":{"line":159,"column":72}},"98":{"start":{"line":160,"column":30},"end":{"line":160,"column":66}},"99":{"start":{"line":161,"column":12},"end":{"line":163,"column":13}},"100":{"start":{"line":162,"column":16},"end":{"line":162,"column":95}},"101":{"start":{"line":164,"column":35},"end":{"line":164,"column":63}},"102":{"start":{"line":165,"column":12},"end":{"line":167,"column":13}},"103":{"start":{"line":166,"column":16},"end":{"line":166,"column":103}},"104":{"start":{"line":168,"column":39},"end":{"line":168,"column":72}},"105":{"start":{"line":169,"column":28},"end":{"line":169,"column":99}},"106":{"start":{"line":170,"column":12},"end":{"line":170,"column":44}},"107":{"start":{"line":173,"column":12},"end":{"line":173,"column":41}},"108":{"start":{"line":177,"column":26},"end":{"line":177,"column":28}},"109":{"start":{"line":178,"column":8},"end":{"line":185,"column":9}},"110":{"start":{"line":179,"column":28},"end":{"line":183,"column":13}},"111":{"start":{"line":184,"column":12},"end":{"line":184,"column":38}},"112":{"start":{"line":186,"column":8},"end":{"line":186,"column":33}},"113":{"start":{"line":187,"column":8},"end":{"line":187,"column":44}},"114":{"start":{"line":190,"column":0},"end":{"line":190,"column":32}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":50},"end":{"line":18,"column":51}},"loc":{"start":{"line":18,"column":65},"end":{"line":24,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":25,"column":56},"end":{"line":25,"column":57}},"loc":{"start":{"line":25,"column":71},"end":{"line":27,"column":1}},"line":25},"7":{"name":"(anonymous_7)","decl":{"start":{"line":36,"column":4},"end":{"line":36,"column":5}},"loc":{"start":{"line":36,"column":18},"end":{"line":39,"column":5}},"line":36},"8":{"name":"(anonymous_8)","decl":{"start":{"line":40,"column":4},"end":{"line":40,"column":5}},"loc":{"start":{"line":40,"column":12},"end":{"line":55,"column":5}},"line":40},"9":{"name":"(anonymous_9)","decl":{"start":{"line":56,"column":4},"end":{"line":56,"column":5}},"loc":{"start":{"line":56,"column":40},"end":{"line":70,"column":5}},"line":56},"10":{"name":"(anonymous_10)","decl":{"start":{"line":71,"column":4},"end":{"line":71,"column":5}},"loc":{"start":{"line":71,"column":26},"end":{"line":75,"column":5}},"line":71},"11":{"name":"(anonymous_11)","decl":{"start":{"line":76,"column":4},"end":{"line":76,"column":5}},"loc":{"start":{"line":76,"column":23},"end":{"line":80,"column":5}},"line":76},"12":{"name":"(anonymous_12)","decl":{"start":{"line":81,"column":4},"end":{"line":81,"column":5}},"loc":{"start":{"line":81,"column":25},"end":{"line":85,"column":5}},"line":81},"13":{"name":"(anonymous_13)","decl":{"start":{"line":86,"column":4},"end":{"line":86,"column":5}},"loc":{"start":{"line":86,"column":34},"end":{"line":108,"column":5}},"line":86},"14":{"name":"(anonymous_14)","decl":{"start":{"line":91,"column":24},"end":{"line":91,"column":25}},"loc":{"start":{"line":91,"column":48},"end":{"line":101,"column":13}},"line":91},"15":{"name":"(anonymous_15)","decl":{"start":{"line":109,"column":4},"end":{"line":109,"column":5}},"loc":{"start":{"line":109,"column":37},"end":{"line":138,"column":5}},"line":109},"16":{"name":"(anonymous_16)","decl":{"start":{"line":114,"column":53},"end":{"line":114,"column":54}},"loc":{"start":{"line":114,"column":66},"end":{"line":125,"column":17}},"line":114},"17":{"name":"(anonymous_17)","decl":{"start":{"line":139,"column":4},"end":{"line":139,"column":5}},"loc":{"start":{"line":139,"column":22},"end":{"line":151,"column":5}},"line":139},"18":{"name":"(anonymous_18)","decl":{"start":{"line":152,"column":4},"end":{"line":152,"column":5}},"loc":{"start":{"line":152,"column":16},"end":{"line":156,"column":5}},"line":152},"19":{"name":"(anonymous_19)","decl":{"start":{"line":157,"column":4},"end":{"line":157,"column":5}},"loc":{"start":{"line":157,"column":24},"end":{"line":175,"column":5}},"line":157},"20":{"name":"(anonymous_20)","decl":{"start":{"line":176,"column":4},"end":{"line":176,"column":5}},"loc":{"start":{"line":176,"column":25},"end":{"line":188,"column":5}},"line":176}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{"line":10,"column":4},"end":{"line":10,"column":33}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":24,"column":1}}],"line":18},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},{"start":{"line":19,"column":4},"end":{"line":19,"column":42}}],"line":19},"12":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":11}},{"start":{"line":19,"column":15},"end":{"line":19,"column":29}}],"line":19},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},{"start":{"line":21,"column":4},"end":{"line":21,"column":141}}],"line":21},"14":{"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},{"start":{"line":21,"column":40},"end":{"line":21,"column":141}}],"line":21},"15":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":107}},"type":"binary-expr","locations":[{"start":{"line":21,"column":44},"end":{"line":21,"column":59}},{"start":{"line":21,"column":63},"end":{"line":21,"column":107}}],"line":21},"16":{"loc":{"start":{"line":25,"column":22},"end":{"line":27,"column":1}},"type":"binary-expr","locations":[{"start":{"line":25,"column":23},"end":{"line":25,"column":27}},{"start":{"line":25,"column":31},"end":{"line":25,"column":51}},{"start":{"line":25,"column":56},"end":{"line":27,"column":1}}],"line":25},"17":{"loc":{"start":{"line":26,"column":11},"end":{"line":26,"column":61}},"type":"cond-expr","locations":[{"start":{"line":26,"column":37},"end":{"line":26,"column":40}},{"start":{"line":26,"column":43},"end":{"line":26,"column":61}}],"line":26},"18":{"loc":{"start":{"line":26,"column":12},"end":{"line":26,"column":33}},"type":"binary-expr","locations":[{"start":{"line":26,"column":12},"end":{"line":26,"column":15}},{"start":{"line":26,"column":19},"end":{"line":26,"column":33}}],"line":26},"19":{"loc":{"start":{"line":41,"column":8},"end":{"line":54,"column":9}},"type":"if","locations":[{"start":{"line":41,"column":8},"end":{"line":54,"column":9}},{"start":{"line":41,"column":8},"end":{"line":54,"column":9}}],"line":41},"20":{"loc":{"start":{"line":43,"column":12},"end":{"line":53,"column":13}},"type":"if","locations":[{"start":{"line":43,"column":12},"end":{"line":53,"column":13}},{"start":{"line":43,"column":12},"end":{"line":53,"column":13}}],"line":43},"21":{"loc":{"start":{"line":46,"column":20},"end":{"line":51,"column":21}},"type":"if","locations":[{"start":{"line":46,"column":20},"end":{"line":51,"column":21}},{"start":{"line":46,"column":20},"end":{"line":51,"column":21}}],"line":46},"22":{"loc":{"start":{"line":72,"column":8},"end":{"line":74,"column":9}},"type":"if","locations":[{"start":{"line":72,"column":8},"end":{"line":74,"column":9}},{"start":{"line":72,"column":8},"end":{"line":74,"column":9}}],"line":72},"23":{"loc":{"start":{"line":72,"column":12},"end":{"line":72,"column":55}},"type":"binary-expr","locations":[{"start":{"line":72,"column":12},"end":{"line":72,"column":21}},{"start":{"line":72,"column":25},"end":{"line":72,"column":41}},{"start":{"line":72,"column":45},"end":{"line":72,"column":55}}],"line":72},"24":{"loc":{"start":{"line":77,"column":8},"end":{"line":79,"column":9}},"type":"if","locations":[{"start":{"line":77,"column":8},"end":{"line":79,"column":9}},{"start":{"line":77,"column":8},"end":{"line":79,"column":9}}],"line":77},"25":{"loc":{"start":{"line":82,"column":8},"end":{"line":84,"column":9}},"type":"if","locations":[{"start":{"line":82,"column":8},"end":{"line":84,"column":9}},{"start":{"line":82,"column":8},"end":{"line":84,"column":9}}],"line":82},"26":{"loc":{"start":{"line":92,"column":16},"end":{"line":100,"column":17}},"type":"if","locations":[{"start":{"line":92,"column":16},"end":{"line":100,"column":17}},{"start":{"line":92,"column":16},"end":{"line":100,"column":17}}],"line":92},"27":{"loc":{"start":{"line":93,"column":20},"end":{"line":96,"column":21}},"type":"if","locations":[{"start":{"line":93,"column":20},"end":{"line":96,"column":21}},{"start":{"line":93,"column":20},"end":{"line":96,"column":21}}],"line":93},"28":{"loc":{"start":{"line":134,"column":8},"end":{"line":136,"column":9}},"type":"if","locations":[{"start":{"line":134,"column":8},"end":{"line":136,"column":9}},{"start":{"line":134,"column":8},"end":{"line":136,"column":9}}],"line":134},"29":{"loc":{"start":{"line":153,"column":8},"end":{"line":155,"column":9}},"type":"if","locations":[{"start":{"line":153,"column":8},"end":{"line":155,"column":9}},{"start":{"line":153,"column":8},"end":{"line":155,"column":9}}],"line":153},"30":{"loc":{"start":{"line":161,"column":12},"end":{"line":163,"column":13}},"type":"if","locations":[{"start":{"line":161,"column":12},"end":{"line":163,"column":13}},{"start":{"line":161,"column":12},"end":{"line":163,"column":13}}],"line":161},"31":{"loc":{"start":{"line":165,"column":12},"end":{"line":167,"column":13}},"type":"if","locations":[{"start":{"line":165,"column":12},"end":{"line":167,"column":13}},{"start":{"line":165,"column":12},"end":{"line":167,"column":13}}],"line":165}},"s":{"0":1,"1":103,"2":103,"3":103,"4":103,"5":98,"6":65,"7":103,"8":0,"9":0,"10":0,"11":1,"12":1,"13":0,"14":1,"15":1,"16":0,"17":1,"18":1,"19":1,"20":103,"21":103,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":23,"33":23,"34":23,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":22,"45":22,"46":19,"47":18,"48":16,"49":12,"50":12,"51":12,"52":10,"53":10,"54":28,"55":5,"56":19,"57":1,"58":18,"59":2,"60":16,"61":16,"62":16,"63":16,"64":15,"65":17849,"66":17846,"67":17843,"68":17843,"69":3,"70":12,"71":12,"72":4,"73":12,"74":12,"75":17843,"76":17843,"77":17843,"78":193974,"79":17843,"80":0,"81":12,"82":12,"83":12,"84":10,"85":12,"86":6,"87":6,"88":4,"89":2,"90":2,"91":2,"92":4,"93":4,"94":4,"95":2,"96":39,"97":39,"98":39,"99":25,"100":1,"101":24,"102":24,"103":0,"104":24,"105":24,"106":17,"107":22,"108":4,"109":4,"110":4,"111":4,"112":4,"113":4,"114":1},"f":{"0":103,"1":65,"2":0,"3":1,"4":0,"5":1,"6":1,"7":23,"8":23,"9":22,"10":28,"11":19,"12":18,"13":16,"14":17849,"15":12,"16":193974,"17":6,"18":4,"19":39,"20":4},"b":{"0":[1,1,1],"1":[1,0],"2":[103,0],"3":[98,5],"4":[103,103],"5":[5,98],"6":[98,5],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[0,1],"12":[1,1],"13":[1,0],"14":[103,0],"15":[103,103],"16":[1,1,1],"17":[0,1],"18":[1,1],"19":[1,22],"20":[1,0],"21":[1,0],"22":[5,23],"23":[28,26,24],"24":[1,18],"25":[2,16],"26":[17846,3],"27":[17843,3],"28":[10,2],"29":[2,2],"30":[1,24],"31":[0,24]},"inputSourceMap":{"version":3,"file":"C:/Users/karry/IdeaProjects/project_team170/src/controller/InsightFacade.ts","sources":["C:/Users/karry/IdeaProjects/project_team170/src/controller/InsightFacade.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,uCAAyB;AACzB,kDAA0B;AAC1B,qDAO0B;AAI1B,+DAA0D;AAC1D,2DAAsD;AAOtD,MAAqB,aAAa;IAC1B,QAAQ,CAAqB;IAEpC;QACC,IAAI,CAAC,QAAQ,GAAG,IAAI,GAAG,EAAE,CAAC;QAG1B,IAAI,CAAC,KAAK,EAAE,CAAC;IACd,CAAC;IAGO,KAAK;QACZ,IAAI,EAAE,CAAC,UAAU,CAAC,QAAQ,CAAC,EAAE;YAC5B,MAAM,IAAI,GAAa,EAAE,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;YAGhD,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,EAAE;gBACrC,KAAK,MAAM,IAAI,IAAI,IAAI,EAAE;oBACxB,MAAM,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;oBAE5C,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE;wBAClC,MAAM,WAAW,GAAG,EAAE,CAAC,YAAY,CAAC,SAAS,GAAG,SAAS,GAAG,OAAO,EAAE,OAAO,CAAC,CAAC;wBAC9E,MAAM,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;wBAC/C,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,SAAS,EAAE,cAAc,CAAC,CAAC;wBAC7C,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,SAAS,EAAE,cAAc,CAAC,CAAC;qBAG7C;iBACD;aACD;SACD;IACF,CAAC;IAEM,KAAK,CAAC,UAAU,CAAC,EAAU,EAAE,OAAe,EAAE,IAAwB;QAC5E,IAAI;YAEH,IAAI,CAAC,iBAAiB,CAAC,EAAE,CAAC,CAAC;YAG3B,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;YAGxB,IAAI,CAAC,gBAAgB,CAAC,EAAE,CAAC,CAAC;YAG1B,MAAM,eAAe,GAAG,MAAM,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;YAG3D,IAAI,CAAC,WAAW,CAAC,EAAE,EAAE,eAAe,CAAC,CAAC;YAItC,IAAI,UAAU,GAAa,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;YAC5D,OAAO,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;SAEnC;QAAC,OAAO,KAAK,EAAE;YACf,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YACnB,OAAO,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;SAC7B;IACF,CAAC;IAGO,iBAAiB,CAAC,EAAU;QACnC,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,EAAE,KAAK,GAAG,EAAE;YAChD,MAAM,IAAI,6BAAY,CAAC,oBAAoB,CAAC,CAAC;SAC7C;IACF,CAAC;IAGO,YAAY,CAAC,IAAwB;QAC5C,IAAI,IAAI,KAAK,mCAAkB,CAAC,QAAQ,EAAE;YACzC,MAAM,IAAI,6BAAY,CAAC,sBAAsB,CAAC,CAAC;SAC/C;IACF,CAAC;IAGO,gBAAgB,CAAC,EAAU;QAClC,IAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE;YAC1B,MAAM,IAAI,6BAAY,CAAC,0BAA0B,CAAC,CAAC;SACnD;IACF,CAAC;IAEO,KAAK,CAAC,cAAc,CAAC,OAAe;QAC3C,IAAI;YACH,IAAI,QAAQ,GAA2B,EAAE,CAAC;YAC1C,IAAI,GAAG,GAAG,IAAI,eAAK,EAAE,CAAC;YACtB,GAAG,GAAG,MAAM,eAAK,CAAC,SAAS,CAAC,OAAO,EAAE,EAAC,MAAM,EAAE,IAAI,EAAC,CAAC,CAAC;YAGrD,GAAG,CAAC,OAAO,CAAC,CAAC,YAAY,EAAE,IAAI,EAAE,EAAE;gBAClC,IAAI,YAAY,CAAC,UAAU,CAAC,UAAU,CAAC,EAAE;oBACxC,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAC;wBAG/B,MAAM,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;wBACzC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;qBAC3B;iBACD;qBAAM;oBACN,MAAM,IAAI,6BAAY,CAAC,qDAAqD,CAAC,CAAC;iBAC9E;YACF,CAAC,CAAC,CAAC;YACH,MAAM,WAAW,GAAa,MAAM,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YAE1D,OAAO,WAAW,CAAC;SACnB;QAAC,OAAO,KAAK,EAAE;YACf,MAAM,IAAI,6BAAY,CAAC,iBAAiB,CAAC,CAAC;SAC1C;IACF,CAAC;IAEO,WAAW,CAAC,EAAU,EAAE,eAAyB;QACxD,IAAI,WAAW,GAAc,EAAE,CAAC;QAEhC,KAAK,MAAM,GAAG,IAAI,eAAe,EAAC;YACjC,IAAI;gBAGH,MAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;gBAGjC,MAAM,QAAQ,GAAc,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,MAAW,EAAE,EAAE,CAAC,CAAC;oBACjE,KAAK,EAAE,MAAM,CAAC,KAAK;oBACnB,IAAI,EAAE,MAAM,CAAC,EAAE;oBACf,UAAU,EAAE,MAAM,CAAC,SAAS;oBAC5B,KAAK,EAAE,MAAM,CAAC,KAAK;oBACnB,IAAI,EAAE,MAAM,CAAC,IAAI;oBACjB,EAAE,EAAE,MAAM,CAAC,MAAM;oBACjB,IAAI,EAAE,MAAM,CAAC,IAAI;oBACjB,IAAI,EAAE,MAAM,CAAC,IAAI;oBACjB,GAAG,EAAE,MAAM,CAAC,GAAG;oBACf,IAAI,EAAE,MAAM,CAAC,OAAO;iBACpB,CAAC,CAAC,CAAC;gBACJ,WAAW,GAAG,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;aAC3C;YAAC,OAAO,KAAK,EAAE;gBACf,MAAM,IAAI,6BAAY,CAAC,iBAAiB,CAAC,CAAC;aAC1C;SACD;QAED,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,EAAE,WAAW,CAAC,CAAC;QACnC,MAAM,kBAAkB,GAAG,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;QAEvD,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,QAAQ,CAAC,EAAE;YAC7B,EAAE,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;SACvB;QACD,EAAE,CAAC,aAAa,CAAC,SAAS,GAAG,EAAE,GAAG,OAAO,EAAE,kBAAkB,EAAE,OAAO,CAAC,CAAC;IACzE,CAAC;IAEM,aAAa,CAAC,EAAU;QAC9B,IAAI;YAEH,IAAI,CAAC,iBAAiB,CAAC,EAAE,CAAC,CAAC;YAG3B,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;YAGjB,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;YACzB,EAAE,CAAC,UAAU,CAAC,SAAS,GAAG,EAAE,GAAG,OAAO,CAAC,CAAC;YAExC,OAAO,OAAO,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;SAC3B;QAAC,OAAO,KAAK,EAAE;YACf,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YACnB,OAAO,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;SAC7B;IACF,CAAC;IAEO,OAAO,CAAC,EAAU;QACzB,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,SAAS,GAAG,EAAE,GAAG,OAAO,CAAC,EAAE;YAC7C,MAAM,IAAI,8BAAa,CAAC,2BAA2B,CAAC,CAAC;SACrD;IACF,CAAC;IAEM,YAAY,CAAC,KAAc;QACjC,IAAI;YACH,MAAM,cAAc,GAAG,IAAI,+BAAc,EAAE,CAAC;YAC5C,MAAM,SAAS,GAAG,cAAc,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;YACvD,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE;gBAClC,MAAM,IAAI,6BAAY,CAAC,qCAAqC,CAAC,CAAC;aAC9D;YACD,MAAM,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;YACpD,IAAI,CAAC,cAAc,EAAE;gBACpB,MAAM,IAAI,6BAAY,CAAC,6CAA6C,CAAC,CAAC;aACtE;YACD,MAAM,kBAAkB,GAAG,IAAI,2BAAY,EAAE,CAAC;YAC9C,MAAM,OAAO,GAAG,kBAAkB,CAAC,kBAAkB,CAAC,KAAK,EAAE,cAAc,EAAE,SAAS,CAAC,CAAC;YACxF,OAAO,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;SAChC;QAAC,OAAO,KAAK,EAAE;YACf,OAAO,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;SAC7B;IACF,CAAC;IAEM,KAAK,CAAC,YAAY;QACxB,IAAI,WAAW,GAAqB,EAAE,CAAC;QAGvC,KAAK,IAAI,CAAC,GAAG,EAAE,KAAK,CAAC,IAAI,IAAI,CAAC,QAAQ,EAAE;YAEvC,MAAM,OAAO,GAAmB;gBAC/B,EAAE,EAAE,GAAG;gBACP,IAAI,EAAE,mCAAkB,CAAC,QAAQ;gBACjC,OAAO,EAAE,KAAK,CAAC,MAAM;aACrB,CAAC;YACF,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SAC1B;QACD,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;QACzB,OAAO,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;IACrC,CAAC;CACD;AA9MD,gCA8MC","sourcesContent":["import * as fs from \"fs\";\r\nimport JSZip from \"jszip\";\r\nimport {\r\n\tIInsightFacade,\r\n\tInsightDataset,\r\n\tInsightDatasetKind,\r\n\tInsightError,\r\n\tInsightResult,\r\n\tNotFoundError\r\n} from \"./IInsightFacade\";\r\nimport {Section} from \"./section\";\r\n\r\n\r\nimport {QueryValidator} from \"./utilities/QueryValidator\";\r\nimport {PerformQuery} from \"./utilities/PerformQuery\";\r\n\r\n/**\r\n * This is the main programmatic entry point for the project.\r\n * Method documentation is in IInsightFacade\r\n *\r\n */\r\nexport default class InsightFacade implements IInsightFacade {\r\n\tpublic datasets: Map<string, any[]>;\r\n\r\n\tconstructor() {\r\n\t\tthis.datasets = new Map();\r\n\r\n\t\t// crash handling\r\n\t\tthis.crash();\r\n\t}\r\n\r\n\t// crash handling\r\n\tprivate crash() {\r\n\t\tif (fs.existsSync(\"./data\")) {\r\n\t\t\tconst disk: string[] = fs.readdirSync(\"./data\");\r\n\r\n\t\t\t// if datasets is missing courses compared to disk\r\n\t\t\tif (this.datasets.size < disk.length) {\r\n\t\t\t\tfor (const file of disk) {\r\n\t\t\t\t\tconst datasetId = file.replace(\".json\", \"\");\r\n\r\n\t\t\t\t\tif (!this.datasets.has(datasetId)) {\r\n\t\t\t\t\t\tconst fileContent = fs.readFileSync(\"./data/\" + datasetId + \".json\", \"utf-8\");\r\n\t\t\t\t\t\tconst datasetContent = JSON.parse(fileContent);\r\n\t\t\t\t\t\tthis.datasets.set(datasetId, datasetContent);\r\n\t\t\t\t\t\tthis.datasets.set(datasetId, datasetContent);\r\n\t\t\t\t\t\t// TODO: when crash happens, populate datasets from disk\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic async addDataset(id: string, content: string, kind: InsightDatasetKind): Promise<string[]> {\r\n\t\ttry {\r\n\t\t\t// Make sure id is valid\r\n\t\t\tthis.validateDatasetId(id);\r\n\r\n\t\t\t// Make sure kind is valid\r\n\t\t\tthis.validateKind(kind);\r\n\r\n\t\t\t// Check if the dataset with the same id already exists\r\n\t\t\tthis.checkDuplicateId(id);\r\n\r\n\t\t\t// Extract and validate content\r\n\t\t\tconst contentUnzipped = await this.extractContent(content);\r\n\r\n\t\t\t// Parse content\r\n\t\t\tthis.saveContent(id, contentUnzipped);\r\n\r\n\t\t\t// console.log([...this.datasets.values()]);\r\n\t\t\t// return id after dataset successfully added\r\n\t\t\tlet datasetIds: string[] = Array.from(this.datasets.keys());\r\n\t\t\treturn Promise.resolve(datasetIds);\r\n\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t\treturn Promise.reject(error);\r\n\t\t}\r\n\t}\r\n\r\n\t// Make sure id is valid\r\n\tprivate validateDatasetId(id: string) {\r\n\t\tif (id === \"\" || id.includes(\"_\") || id === \" \") {\r\n\t\t\tthrow new InsightError(\"Invalid dataset id\");\r\n\t\t}\r\n\t}\r\n\r\n\t// Make sure kind is valid\r\n\tprivate validateKind(kind: InsightDatasetKind) {\r\n\t\tif (kind !== InsightDatasetKind.Sections) {\r\n\t\t\tthrow new InsightError(\"Invalid dataset kind\");\r\n\t\t}\r\n\t}\r\n\r\n\t// Check if the dataset with the same id already exists\r\n\tprivate checkDuplicateId(id: string) {\r\n\t\tif (this.datasets.has(id)) {\r\n\t\t\tthrow new InsightError(\"Dataset id already exist\");\r\n\t\t}\r\n\t}\r\n\r\n\tprivate async extractContent(content: string){\r\n\t\ttry {\r\n\t\t\tlet promises: Array<Promise<string>> = [];\r\n\t\t\tlet zip = new JSZip();\r\n\t\t\tzip = await JSZip.loadAsync(content, {base64: true});\r\n\r\n\t\t\t// for each to iterate through jszip object\r\n\t\t\tzip.forEach((relativePath, file) => {\r\n\t\t\t\tif (relativePath.startsWith(\"courses/\")) {\r\n\t\t\t\t\tif (!relativePath.endsWith(\"/\")){\r\n\t\t\t\t\t\t// call await promise.all on array to hold all those promises & push promise onto array\r\n\t\t\t\t\t\t// Access the contents of the file and add it to the result array\r\n\t\t\t\t\t\tconst promiseFile = file.async(\"string\");\r\n\t\t\t\t\t\tpromises.push(promiseFile);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow new InsightError(\"Invalid content (folder not named courses or empty)\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tconst courseFiles: string[] = await Promise.all(promises);\r\n\t\t\t// console.log(courseFiles);\r\n\t\t\treturn courseFiles;\r\n\t\t} catch (error) {\r\n\t\t\tthrow new InsightError(\"Invalid content\");\r\n\t\t}\r\n\t}\r\n\r\n\tprivate saveContent(id: string, contentUnzipped: string[]){\r\n\t\tlet allSections: Section[] = [];\r\n\r\n\t\tfor (const str of contentUnzipped){\r\n\t\t\ttry {\r\n\t\t\t\t// console.log(str);\r\n\t\t\t\t// console.log(\"inside try\");\r\n\t\t\t\tconst jsonData = JSON.parse(str);\r\n\t\t\t\t// console.log(\"inside parse\");\r\n\t\t\t\t// console.log(jsonData);\r\n\t\t\t\tconst sections: Section[] = jsonData.result.map((course: any) => ({\r\n\t\t\t\t\ttitle: course.Title,\r\n\t\t\t\t\tuuid: course.id,\r\n\t\t\t\t\tinstructor: course.Professor,\r\n\t\t\t\t\taudit: course.Audit,\r\n\t\t\t\t\tyear: course.Year,\r\n\t\t\t\t\tid: course.Course,\r\n\t\t\t\t\tpass: course.Pass,\r\n\t\t\t\t\tfail: course.Fail,\r\n\t\t\t\t\tavg: course.Avg,\r\n\t\t\t\t\tdept: course.Subject\r\n\t\t\t\t}));\r\n\t\t\t\tallSections = allSections.concat(sections);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthrow new InsightError(\"Invalid content\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.datasets.set(id, allSections);\r\n\t\tconst serializedSections = JSON.stringify(allSections);\r\n\t\t// console.log(serializedSections);\r\n\t\tif (!fs.existsSync(\"./data\")) {\r\n\t\t\tfs.mkdirSync(\"./data\");\r\n\t\t}\r\n\t\tfs.writeFileSync(\"./data/\" + id + \".json\", serializedSections, \"utf-8\");\r\n\t}\r\n\r\n\tpublic removeDataset(id: string): Promise<string> {\r\n\t\ttry {\r\n\t\t\t// Make sure id is valid\r\n\t\t\tthis.validateDatasetId(id);\r\n\r\n\t\t\t// Make sure id exist\r\n\t\t\tthis.idExist(id);\r\n\r\n\t\t\t// Remove dataset\r\n\t\t\tthis.datasets.delete(id);\r\n\t\t\tfs.unlinkSync(\"./data/\" + id + \".json\");\r\n\r\n\t\t\treturn Promise.resolve(id);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t\treturn Promise.reject(error);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate idExist(id: string) {\r\n\t\tif (!fs.existsSync(\"./data/\" + id + \".json\")) {\r\n\t\t\tthrow new NotFoundError(\"Dataset id does not exist\");\r\n\t\t}\r\n\t}\r\n\r\n\tpublic performQuery(query: unknown): Promise<InsightResult[]> {\r\n\t\ttry {\r\n\t\t\tconst queryValidator = new QueryValidator();\r\n\t\t\tconst datasetID = queryValidator.queryValidator(query);\r\n\t\t\tif (!this.datasets.has(datasetID)) {\r\n\t\t\t\tthrow new InsightError(\"Reference dataset id not added yet.\");\r\n\t\t\t}\r\n\t\t\tconst datasetContent = this.datasets.get(datasetID);\r\n\t\t\tif (!datasetContent) {\r\n\t\t\t\tthrow new InsightError(\"Dataset content not found for the given id.\");\r\n\t\t\t}\r\n\t\t\tconst performQueryHelper = new PerformQuery();\r\n\t\t\tconst results = performQueryHelper.performQueryHelper(query, datasetContent, datasetID);\r\n\t\t\treturn Promise.resolve(results);\r\n\t\t} catch (error) {\r\n\t\t\treturn Promise.reject(error);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic async listDatasets(): Promise<InsightDataset[]> {\r\n\t\tlet datasetList: InsightDataset[] = [];\r\n\t\t// let totalRows = 0;\r\n\r\n\t\tfor (let [key, value] of this.datasets) {\r\n\t\t\t// totalRows += value.length;\r\n\t\t\tconst dataset: InsightDataset = {\r\n\t\t\t\tid: key,\r\n\t\t\t\tkind: InsightDatasetKind.Sections,\r\n\t\t\t\tnumRows: value.length\r\n\t\t\t};\r\n\t\t\tdatasetList.push(dataset);\r\n\t\t}\r\n\t\tconsole.log(datasetList);\r\n\t\treturn Promise.resolve(datasetList);\r\n\t}\r\n}\r\n\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"548e1bf4760dc7148bba94c37ed4a67646e5c8e2","contentHash":"9d3a9bb75fce9b03a5950031cd548f21271b91b74b025047902ff27c2e8857f5"},"C:\\Users\\karry\\IdeaProjects\\project_team170\\src\\controller\\utilities\\QueryValidator.ts":{"path":"C:\\Users\\karry\\IdeaProjects\\project_team170\\src\\controller\\utilities\\QueryValidator.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":25},"end":{"line":4,"column":53}},"3":{"start":{"line":6,"column":14},"end":{"line":6,"column":54}},"4":{"start":{"line":7,"column":14},"end":{"line":7,"column":59}},"5":{"start":{"line":9,"column":8},"end":{"line":26,"column":9}},"6":{"start":{"line":10,"column":25},"end":{"line":10,"column":43}},"7":{"start":{"line":11,"column":12},"end":{"line":13,"column":13}},"8":{"start":{"line":12,"column":16},"end":{"line":12,"column":92}},"9":{"start":{"line":14,"column":12},"end":{"line":18,"column":13}},"10":{"start":{"line":15,"column":16},"end":{"line":17,"column":17}},"11":{"start":{"line":16,"column":20},"end":{"line":16,"column":84}},"12":{"start":{"line":19,"column":23},"end":{"line":19,"column":62}},"13":{"start":{"line":20,"column":12},"end":{"line":20,"column":52}},"14":{"start":{"line":21,"column":12},"end":{"line":21,"column":22}},"15":{"start":{"line":24,"column":12},"end":{"line":24,"column":33}},"16":{"start":{"line":25,"column":12},"end":{"line":25,"column":24}},"17":{"start":{"line":29,"column":8},"end":{"line":31,"column":9}},"18":{"start":{"line":30,"column":12},"end":{"line":30,"column":24}},"19":{"start":{"line":32,"column":24},"end":{"line":32,"column":42}},"20":{"start":{"line":33,"column":8},"end":{"line":35,"column":9}},"21":{"start":{"line":34,"column":12},"end":{"line":34,"column":107}},"22":{"start":{"line":36,"column":24},"end":{"line":36,"column":45}},"23":{"start":{"line":37,"column":8},"end":{"line":51,"column":9}},"24":{"start":{"line":38,"column":12},"end":{"line":38,"column":71}},"25":{"start":{"line":40,"column":13},"end":{"line":51,"column":9}},"26":{"start":{"line":41,"column":12},"end":{"line":41,"column":67}},"27":{"start":{"line":43,"column":13},"end":{"line":51,"column":9}},"28":{"start":{"line":44,"column":12},"end":{"line":44,"column":67}},"29":{"start":{"line":46,"column":13},"end":{"line":51,"column":9}},"30":{"start":{"line":47,"column":12},"end":{"line":47,"column":64}},"31":{"start":{"line":50,"column":12},"end":{"line":50,"column":88}},"32":{"start":{"line":54,"column":8},"end":{"line":56,"column":9}},"33":{"start":{"line":55,"column":12},"end":{"line":55,"column":68}},"34":{"start":{"line":57,"column":8},"end":{"line":61,"column":9}},"35":{"start":{"line":58,"column":12},"end":{"line":60,"column":13}},"36":{"start":{"line":59,"column":16},"end":{"line":59,"column":85}},"37":{"start":{"line":62,"column":8},"end":{"line":62,"column":20}},"38":{"start":{"line":65,"column":21},"end":{"line":65,"column":48}},"39":{"start":{"line":66,"column":8},"end":{"line":68,"column":9}},"40":{"start":{"line":67,"column":12},"end":{"line":67,"column":85}},"41":{"start":{"line":69,"column":8},"end":{"line":69,"column":20}},"42":{"start":{"line":72,"column":21},"end":{"line":72,"column":48}},"43":{"start":{"line":73,"column":22},"end":{"line":73,"column":39}},"44":{"start":{"line":74,"column":8},"end":{"line":76,"column":9}},"45":{"start":{"line":75,"column":12},"end":{"line":75,"column":85}},"46":{"start":{"line":77,"column":8},"end":{"line":79,"column":9}},"47":{"start":{"line":78,"column":12},"end":{"line":78,"column":102}},"48":{"start":{"line":80,"column":8},"end":{"line":80,"column":20}},"49":{"start":{"line":83,"column":8},"end":{"line":85,"column":9}},"50":{"start":{"line":84,"column":12},"end":{"line":84,"column":39}},"51":{"start":{"line":86,"column":8},"end":{"line":88,"column":9}},"52":{"start":{"line":87,"column":12},"end":{"line":87,"column":57}},"53":{"start":{"line":89,"column":8},"end":{"line":91,"column":9}},"54":{"start":{"line":90,"column":12},"end":{"line":90,"column":25}},"55":{"start":{"line":92,"column":8},"end":{"line":92,"column":20}},"56":{"start":{"line":95,"column":8},"end":{"line":97,"column":9}},"57":{"start":{"line":96,"column":12},"end":{"line":96,"column":71}},"58":{"start":{"line":98,"column":8},"end":{"line":98,"column":49}},"59":{"start":{"line":101,"column":8},"end":{"line":126,"column":9}},"60":{"start":{"line":102,"column":25},"end":{"line":102,"column":45}},"61":{"start":{"line":103,"column":12},"end":{"line":105,"column":13}},"62":{"start":{"line":104,"column":16},"end":{"line":104,"column":83}},"63":{"start":{"line":106,"column":12},"end":{"line":110,"column":13}},"64":{"start":{"line":107,"column":16},"end":{"line":109,"column":17}},"65":{"start":{"line":108,"column":20},"end":{"line":108,"column":87}},"66":{"start":{"line":111,"column":12},"end":{"line":113,"column":13}},"67":{"start":{"line":112,"column":16},"end":{"line":112,"column":93}},"68":{"start":{"line":114,"column":23},"end":{"line":114,"column":53}},"69":{"start":{"line":115,"column":33},"end":{"line":115,"column":75}},"70":{"start":{"line":116,"column":12},"end":{"line":121,"column":13}},"71":{"start":{"line":117,"column":16},"end":{"line":119,"column":17}},"72":{"start":{"line":118,"column":20},"end":{"line":118,"column":82}},"73":{"start":{"line":120,"column":16},"end":{"line":120,"column":68}},"74":{"start":{"line":122,"column":12},"end":{"line":122,"column":22}},"75":{"start":{"line":125,"column":12},"end":{"line":125,"column":83}},"76":{"start":{"line":129,"column":24},"end":{"line":129,"column":39}},"77":{"start":{"line":130,"column":28},"end":{"line":130,"column":38}},"78":{"start":{"line":131,"column":8},"end":{"line":133,"column":9}},"79":{"start":{"line":132,"column":12},"end":{"line":132,"column":45}},"80":{"start":{"line":134,"column":8},"end":{"line":134,"column":70}},"81":{"start":{"line":137,"column":8},"end":{"line":144,"column":9}},"82":{"start":{"line":138,"column":12},"end":{"line":140,"column":13}},"83":{"start":{"line":139,"column":16},"end":{"line":139,"column":86}},"84":{"start":{"line":141,"column":12},"end":{"line":143,"column":13}},"85":{"start":{"line":142,"column":16},"end":{"line":142,"column":81}},"86":{"start":{"line":145,"column":8},"end":{"line":145,"column":23}},"87":{"start":{"line":148,"column":22},"end":{"line":148,"column":38}},"88":{"start":{"line":149,"column":8},"end":{"line":151,"column":9}},"89":{"start":{"line":150,"column":12},"end":{"line":150,"column":25}},"90":{"start":{"line":152,"column":8},"end":{"line":152,"column":41}},"91":{"start":{"line":155,"column":8},"end":{"line":157,"column":9}},"92":{"start":{"line":156,"column":12},"end":{"line":156,"column":100}},"93":{"start":{"line":160,"column":0},"end":{"line":160,"column":40}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":8,"column":4},"end":{"line":8,"column":5}},"loc":{"start":{"line":8,"column":26},"end":{"line":27,"column":5}},"line":8},"1":{"name":"(anonymous_1)","decl":{"start":{"line":28,"column":4},"end":{"line":28,"column":5}},"loc":{"start":{"line":28,"column":30},"end":{"line":52,"column":5}},"line":28},"2":{"name":"(anonymous_2)","decl":{"start":{"line":53,"column":4},"end":{"line":53,"column":5}},"loc":{"start":{"line":53,"column":50},"end":{"line":63,"column":5}},"line":53},"3":{"name":"(anonymous_3)","decl":{"start":{"line":64,"column":4},"end":{"line":64,"column":5}},"loc":{"start":{"line":64,"column":42},"end":{"line":70,"column":5}},"line":64},"4":{"name":"(anonymous_4)","decl":{"start":{"line":71,"column":4},"end":{"line":71,"column":5}},"loc":{"start":{"line":71,"column":42},"end":{"line":81,"column":5}},"line":71},"5":{"name":"(anonymous_5)","decl":{"start":{"line":82,"column":4},"end":{"line":82,"column":5}},"loc":{"start":{"line":82,"column":31},"end":{"line":93,"column":5}},"line":82},"6":{"name":"(anonymous_6)","decl":{"start":{"line":94,"column":4},"end":{"line":94,"column":5}},"loc":{"start":{"line":94,"column":36},"end":{"line":99,"column":5}},"line":94},"7":{"name":"(anonymous_7)","decl":{"start":{"line":100,"column":4},"end":{"line":100,"column":5}},"loc":{"start":{"line":100,"column":30},"end":{"line":127,"column":5}},"line":100},"8":{"name":"(anonymous_8)","decl":{"start":{"line":128,"column":4},"end":{"line":128,"column":5}},"loc":{"start":{"line":128,"column":30},"end":{"line":135,"column":5}},"line":128},"9":{"name":"(anonymous_9)","decl":{"start":{"line":136,"column":4},"end":{"line":136,"column":5}},"loc":{"start":{"line":136,"column":34},"end":{"line":146,"column":5}},"line":136},"10":{"name":"(anonymous_10)","decl":{"start":{"line":147,"column":4},"end":{"line":147,"column":5}},"loc":{"start":{"line":147,"column":38},"end":{"line":153,"column":5}},"line":147},"11":{"name":"(anonymous_11)","decl":{"start":{"line":154,"column":4},"end":{"line":154,"column":5}},"loc":{"start":{"line":154,"column":43},"end":{"line":158,"column":5}},"line":154}},"branchMap":{"0":{"loc":{"start":{"line":11,"column":12},"end":{"line":13,"column":13}},"type":"if","locations":[{"start":{"line":11,"column":12},"end":{"line":13,"column":13}},{"start":{"line":11,"column":12},"end":{"line":13,"column":13}}],"line":11},"1":{"loc":{"start":{"line":11,"column":16},"end":{"line":11,"column":68}},"type":"binary-expr","locations":[{"start":{"line":11,"column":16},"end":{"line":11,"column":39}},{"start":{"line":11,"column":43},"end":{"line":11,"column":68}}],"line":11},"2":{"loc":{"start":{"line":15,"column":16},"end":{"line":17,"column":17}},"type":"if","locations":[{"start":{"line":15,"column":16},"end":{"line":17,"column":17}},{"start":{"line":15,"column":16},"end":{"line":17,"column":17}}],"line":15},"3":{"loc":{"start":{"line":15,"column":20},"end":{"line":15,"column":56}},"type":"binary-expr","locations":[{"start":{"line":15,"column":20},"end":{"line":15,"column":35}},{"start":{"line":15,"column":39},"end":{"line":15,"column":56}}],"line":15},"4":{"loc":{"start":{"line":29,"column":8},"end":{"line":31,"column":9}},"type":"if","locations":[{"start":{"line":29,"column":8},"end":{"line":31,"column":9}},{"start":{"line":29,"column":8},"end":{"line":31,"column":9}}],"line":29},"5":{"loc":{"start":{"line":33,"column":8},"end":{"line":35,"column":9}},"type":"if","locations":[{"start":{"line":33,"column":8},"end":{"line":35,"column":9}},{"start":{"line":33,"column":8},"end":{"line":35,"column":9}}],"line":33},"6":{"loc":{"start":{"line":37,"column":8},"end":{"line":51,"column":9}},"type":"if","locations":[{"start":{"line":37,"column":8},"end":{"line":51,"column":9}},{"start":{"line":37,"column":8},"end":{"line":51,"column":9}}],"line":37},"7":{"loc":{"start":{"line":37,"column":12},"end":{"line":37,"column":53}},"type":"binary-expr","locations":[{"start":{"line":37,"column":12},"end":{"line":37,"column":31}},{"start":{"line":37,"column":35},"end":{"line":37,"column":53}}],"line":37},"8":{"loc":{"start":{"line":40,"column":13},"end":{"line":51,"column":9}},"type":"if","locations":[{"start":{"line":40,"column":13},"end":{"line":51,"column":9}},{"start":{"line":40,"column":13},"end":{"line":51,"column":9}}],"line":40},"9":{"loc":{"start":{"line":40,"column":17},"end":{"line":40,"column":79}},"type":"binary-expr","locations":[{"start":{"line":40,"column":17},"end":{"line":40,"column":35}},{"start":{"line":40,"column":39},"end":{"line":40,"column":57}},{"start":{"line":40,"column":61},"end":{"line":40,"column":79}}],"line":40},"10":{"loc":{"start":{"line":43,"column":13},"end":{"line":51,"column":9}},"type":"if","locations":[{"start":{"line":43,"column":13},"end":{"line":51,"column":9}},{"start":{"line":43,"column":13},"end":{"line":51,"column":9}}],"line":43},"11":{"loc":{"start":{"line":46,"column":13},"end":{"line":51,"column":9}},"type":"if","locations":[{"start":{"line":46,"column":13},"end":{"line":51,"column":9}},{"start":{"line":46,"column":13},"end":{"line":51,"column":9}}],"line":46},"12":{"loc":{"start":{"line":54,"column":8},"end":{"line":56,"column":9}},"type":"if","locations":[{"start":{"line":54,"column":8},"end":{"line":56,"column":9}},{"start":{"line":54,"column":8},"end":{"line":56,"column":9}}],"line":54},"13":{"loc":{"start":{"line":54,"column":12},"end":{"line":54,"column":75}},"type":"binary-expr","locations":[{"start":{"line":54,"column":12},"end":{"line":54,"column":43}},{"start":{"line":54,"column":47},"end":{"line":54,"column":75}}],"line":54},"14":{"loc":{"start":{"line":58,"column":12},"end":{"line":60,"column":13}},"type":"if","locations":[{"start":{"line":58,"column":12},"end":{"line":60,"column":13}},{"start":{"line":58,"column":12},"end":{"line":60,"column":13}}],"line":58},"15":{"loc":{"start":{"line":66,"column":8},"end":{"line":68,"column":9}},"type":"if","locations":[{"start":{"line":66,"column":8},"end":{"line":68,"column":9}},{"start":{"line":66,"column":8},"end":{"line":68,"column":9}}],"line":66},"16":{"loc":{"start":{"line":66,"column":12},"end":{"line":66,"column":96}},"type":"binary-expr","locations":[{"start":{"line":66,"column":12},"end":{"line":66,"column":55}},{"start":{"line":66,"column":59},"end":{"line":66,"column":96}}],"line":66},"17":{"loc":{"start":{"line":74,"column":8},"end":{"line":76,"column":9}},"type":"if","locations":[{"start":{"line":74,"column":8},"end":{"line":76,"column":9}},{"start":{"line":74,"column":8},"end":{"line":76,"column":9}}],"line":74},"18":{"loc":{"start":{"line":74,"column":12},"end":{"line":74,"column":84}},"type":"binary-expr","locations":[{"start":{"line":74,"column":12},"end":{"line":74,"column":55}},{"start":{"line":74,"column":59},"end":{"line":74,"column":84}}],"line":74},"19":{"loc":{"start":{"line":77,"column":8},"end":{"line":79,"column":9}},"type":"if","locations":[{"start":{"line":77,"column":8},"end":{"line":79,"column":9}},{"start":{"line":77,"column":8},"end":{"line":79,"column":9}}],"line":77},"20":{"loc":{"start":{"line":83,"column":8},"end":{"line":85,"column":9}},"type":"if","locations":[{"start":{"line":83,"column":8},"end":{"line":85,"column":9}},{"start":{"line":83,"column":8},"end":{"line":85,"column":9}}],"line":83},"21":{"loc":{"start":{"line":86,"column":8},"end":{"line":88,"column":9}},"type":"if","locations":[{"start":{"line":86,"column":8},"end":{"line":88,"column":9}},{"start":{"line":86,"column":8},"end":{"line":88,"column":9}}],"line":86},"22":{"loc":{"start":{"line":89,"column":8},"end":{"line":91,"column":9}},"type":"if","locations":[{"start":{"line":89,"column":8},"end":{"line":91,"column":9}},{"start":{"line":89,"column":8},"end":{"line":91,"column":9}}],"line":89},"23":{"loc":{"start":{"line":95,"column":8},"end":{"line":97,"column":9}},"type":"if","locations":[{"start":{"line":95,"column":8},"end":{"line":97,"column":9}},{"start":{"line":95,"column":8},"end":{"line":97,"column":9}}],"line":95},"24":{"loc":{"start":{"line":95,"column":12},"end":{"line":95,"column":78}},"type":"binary-expr","locations":[{"start":{"line":95,"column":12},"end":{"line":95,"column":40}},{"start":{"line":95,"column":44},"end":{"line":95,"column":78}}],"line":95},"25":{"loc":{"start":{"line":103,"column":12},"end":{"line":105,"column":13}},"type":"if","locations":[{"start":{"line":103,"column":12},"end":{"line":105,"column":13}},{"start":{"line":103,"column":12},"end":{"line":105,"column":13}}],"line":103},"26":{"loc":{"start":{"line":107,"column":16},"end":{"line":109,"column":17}},"type":"if","locations":[{"start":{"line":107,"column":16},"end":{"line":109,"column":17}},{"start":{"line":107,"column":16},"end":{"line":109,"column":17}}],"line":107},"27":{"loc":{"start":{"line":107,"column":20},"end":{"line":107,"column":56}},"type":"binary-expr","locations":[{"start":{"line":107,"column":20},"end":{"line":107,"column":37}},{"start":{"line":107,"column":41},"end":{"line":107,"column":56}}],"line":107},"28":{"loc":{"start":{"line":111,"column":12},"end":{"line":113,"column":13}},"type":"if","locations":[{"start":{"line":111,"column":12},"end":{"line":113,"column":13}},{"start":{"line":111,"column":12},"end":{"line":113,"column":13}}],"line":111},"29":{"loc":{"start":{"line":111,"column":16},"end":{"line":111,"column":79}},"type":"binary-expr","locations":[{"start":{"line":111,"column":16},"end":{"line":111,"column":47}},{"start":{"line":111,"column":51},"end":{"line":111,"column":79}}],"line":111},"30":{"loc":{"start":{"line":116,"column":12},"end":{"line":121,"column":13}},"type":"if","locations":[{"start":{"line":116,"column":12},"end":{"line":121,"column":13}},{"start":{"line":116,"column":12},"end":{"line":121,"column":13}}],"line":116},"31":{"loc":{"start":{"line":117,"column":16},"end":{"line":119,"column":17}},"type":"if","locations":[{"start":{"line":117,"column":16},"end":{"line":119,"column":17}},{"start":{"line":117,"column":16},"end":{"line":119,"column":17}}],"line":117},"32":{"loc":{"start":{"line":131,"column":8},"end":{"line":133,"column":9}},"type":"if","locations":[{"start":{"line":131,"column":8},"end":{"line":133,"column":9}},{"start":{"line":131,"column":8},"end":{"line":133,"column":9}}],"line":131},"33":{"loc":{"start":{"line":131,"column":12},"end":{"line":131,"column":72}},"type":"binary-expr","locations":[{"start":{"line":131,"column":12},"end":{"line":131,"column":43}},{"start":{"line":131,"column":47},"end":{"line":131,"column":72}}],"line":131},"34":{"loc":{"start":{"line":138,"column":12},"end":{"line":140,"column":13}},"type":"if","locations":[{"start":{"line":138,"column":12},"end":{"line":140,"column":13}},{"start":{"line":138,"column":12},"end":{"line":140,"column":13}}],"line":138},"35":{"loc":{"start":{"line":141,"column":12},"end":{"line":143,"column":13}},"type":"if","locations":[{"start":{"line":141,"column":12},"end":{"line":143,"column":13}},{"start":{"line":141,"column":12},"end":{"line":143,"column":13}}],"line":141},"36":{"loc":{"start":{"line":141,"column":16},"end":{"line":141,"column":112}},"type":"binary-expr","locations":[{"start":{"line":141,"column":16},"end":{"line":141,"column":62}},{"start":{"line":141,"column":66},"end":{"line":141,"column":112}}],"line":141},"37":{"loc":{"start":{"line":149,"column":8},"end":{"line":151,"column":9}},"type":"if","locations":[{"start":{"line":149,"column":8},"end":{"line":151,"column":9}},{"start":{"line":149,"column":8},"end":{"line":151,"column":9}}],"line":149},"38":{"loc":{"start":{"line":149,"column":12},"end":{"line":149,"column":49}},"type":"binary-expr","locations":[{"start":{"line":149,"column":12},"end":{"line":149,"column":30}},{"start":{"line":149,"column":34},"end":{"line":149,"column":49}}],"line":149},"39":{"loc":{"start":{"line":155,"column":8},"end":{"line":157,"column":9}},"type":"if","locations":[{"start":{"line":155,"column":8},"end":{"line":157,"column":9}},{"start":{"line":155,"column":8},"end":{"line":157,"column":9}}],"line":155},"40":{"loc":{"start":{"line":155,"column":12},"end":{"line":155,"column":70}},"type":"binary-expr","locations":[{"start":{"line":155,"column":12},"end":{"line":155,"column":37}},{"start":{"line":155,"column":41},"end":{"line":155,"column":70}}],"line":155}},"s":{"0":1,"1":1,"2":1,"3":39,"4":39,"5":39,"6":39,"7":39,"8":3,"9":36,"10":73,"11":1,"12":35,"13":30,"14":25,"15":14,"16":14,"17":62,"18":0,"19":62,"20":62,"21":0,"22":62,"23":62,"24":16,"25":46,"26":26,"27":20,"28":16,"29":4,"30":2,"31":2,"32":16,"33":1,"34":15,"35":30,"36":0,"37":14,"38":26,"39":26,"40":0,"41":26,"42":16,"43":16,"44":16,"45":0,"46":16,"47":1,"48":14,"49":16,"50":7,"51":15,"52":7,"53":15,"54":1,"55":14,"56":2,"57":0,"58":2,"59":35,"60":35,"61":35,"62":1,"63":34,"64":57,"65":0,"66":34,"67":1,"68":33,"69":32,"70":31,"71":21,"72":0,"73":21,"74":30,"75":5,"76":33,"77":33,"78":33,"79":32,"80":1,"81":32,"82":98,"83":0,"84":98,"85":1,"86":31,"87":201,"88":201,"89":1,"90":200,"91":21,"92":1,"93":1},"f":{"0":39,"1":62,"2":16,"3":26,"4":16,"5":16,"6":2,"7":35,"8":33,"9":32,"10":201,"11":21},"b":{"0":[3,36],"1":[39,37],"2":[1,72],"3":[73,37],"4":[0,62],"5":[0,62],"6":[16,46],"7":[62,53],"8":[26,20],"9":[46,41,26],"10":[16,4],"11":[2,2],"12":[1,15],"13":[16,16],"14":[0,29],"15":[0,26],"16":[26,23],"17":[0,16],"18":[16,14],"19":[1,14],"20":[7,8],"21":[7,8],"22":[1,14],"23":[0,2],"24":[2,2],"25":[1,34],"26":[0,57],"27":[57,23],"28":[1,33],"29":[34,34],"30":[21,10],"31":[0,21],"32":[32,1],"33":[33,33],"34":[0,98],"35":[1,97],"36":[98,61],"37":[1,200],"38":[201,200],"39":[1,20],"40":[21,21]},"inputSourceMap":{"version":3,"file":"C:/Users/karry/IdeaProjects/project_team170/src/controller/utilities/QueryValidator.ts","sources":["C:/Users/karry/IdeaProjects/project_team170/src/controller/utilities/QueryValidator.ts"],"names":[],"mappings":"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","sourcesContent":["import {InsightError} from \"../IInsightFacade\";\r\n\r\nexport class QueryValidator{\r\n\tprivate mfields: string[] = [\"avg\", \"pass\", \"fail\", \"audit\", \"year\"];\r\n\tprivate sfields: string[] = [\"dept\", \"id\", \"instructor\", \"title\", \"uuid\"];\r\n\r\n\tpublic queryValidator(query: any) {\r\n\t\ttry {\r\n\t\t\tconst keys = Object.keys(query);\r\n\r\n\t\t\t// make sure both WHERE and OPTIONS exist\r\n\t\t\tif (!keys.includes(\"WHERE\") || !keys.includes(\"OPTIONS\")) {\r\n\t\t\t\t// console.log(keys);\r\n\t\t\t\t// console.log(!keys.includes(\"WHERE\") || !keys.includes(\"OPTIONS\"));\r\n\t\t\t\tthrow new InsightError(\"Missing WHERE or OPTIONS or both\");\r\n\t\t\t}\r\n\r\n\t\t\t// make sure nothing weird is in the mix\r\n\t\t\tfor (let key of keys) {\r\n\t\t\t\tif (key !== \"WHERE\" && key !== \"OPTIONS\") {\r\n\t\t\t\t\tthrow new InsightError(\"Excess keys in query\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst id = this.optionsValidator(query[\"OPTIONS\"]);\r\n\t\t\tthis.whereValidator(query[\"WHERE\"], id);\r\n\t\t\treturn id;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\tthrow error;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate whereValidator(where: any, id: string): boolean{\r\n\t\t// true if WHERE is empty, we just probably have over 5k results\r\n\t\tif (Object.keys(where).length === 0) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tconst filters = Object.keys(where);\r\n\t\t// false if there are more than one filter key not nested\r\n\t\tif (filters.length > 1) {\r\n\t\t\tthrow new InsightError(\"WHERE should only have 1 key, has \" + filters.length);\r\n\t\t}\r\n\r\n\t\tlet filterKey = Object.keys(where)[0];\r\n\t\tif (filterKey === \"AND\" || filterKey === \"OR\"){\r\n\t\t\treturn this.logicComparisonValidator(where[filterKey], id);\r\n\t\t} else if (filterKey === \"LT\" || filterKey === \"GT\" || filterKey === \"EQ\"){\r\n\t\t\treturn this.mComparisonValidator(where[filterKey], id);\r\n\t\t} else if (filterKey === \"IS\"){\r\n\t\t\treturn this.sComparisonValidator(where[filterKey], id);\r\n\t\t} else if (filterKey === \"NOT\"){\r\n\t\t\treturn this.negationValidator(where[filterKey], id);\r\n\t\t} else {\r\n\t\t\tthrow new InsightError(\"Invalid filter key: \" + filterKey);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate logicComparisonValidator(logicComparison: any[], id: string): boolean {\r\n\t\tif (!Array.isArray(logicComparison) || logicComparison.length === 0){\r\n\t\t\tthrow new InsightError(\"Wrong logic.\");\r\n\t\t}\r\n\r\n\t\tfor (let condition of logicComparison) {\r\n\t\t\tif (!this.whereValidator(condition, id)) {\r\n\t\t\t\tthrow new InsightError(\"Invalid direct comparison\");\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tprivate mComparisonValidator(mComparison: any, id: string): boolean{\r\n\t\tconst mKey = Object.keys(mComparison)[0];\r\n\r\n\t\t// make sure key is equal to \"id_field\" and value is a number\r\n\t\tif (this.fieldValidator(mKey, id, this.mfields) && typeof mComparison[mKey] !== \"number\"){\r\n\t\t\tthrow new InsightError(\"Invalid value in mComparison.\");\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tprivate sComparisonValidator(sComparison: any, id: string): boolean{\r\n\t\tconst sKey = Object.keys(sComparison)[0];\r\n\t\tconst value = sComparison[sKey];\r\n\r\n\t\t// make sure key is equal to \"id_field\" and value is a string\r\n\t\tif (this.fieldValidator(sKey, id, this.sfields) && typeof value !== \"string\"){\r\n\t\t\tthrow new InsightError(\"Invalid value in sComparison.\");\r\n\t\t}\r\n\r\n\t\t// Validate wildcard asterisks\r\n\t\tif (!this.validWildcardString(value)) {\r\n\t\t\tthrow new InsightError(\"Invalid wildcard string in IS filter: \" + value);\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tprivate validWildcardString(value: string): boolean {\r\n\t\t// Validate that if asterisks are used, and are only at the beginning and/or end, max: 1\r\n\t\tif (value.startsWith(\"*\")) {\r\n\t\t\tvalue = value.substring(1);\r\n\t\t}\r\n\t\tif (value.endsWith(\"*\")) {\r\n\t\t\tvalue = value.substring(0, value.length - 1);\r\n\t\t}\r\n\r\n\t\t// Check if there's still an asterisk in the string\r\n\t\tif (value.includes(\"*\")) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tprivate negationValidator(negation: any, id: string): boolean{\r\n\t\tif (typeof negation !== \"object\" || Object.keys(negation).length !== 1){\r\n\t\t\tthrow new InsightError(\"Wrong negation.\");\r\n\t\t}\r\n\t\treturn this.whereValidator(negation, id);\r\n\t}\r\n\r\n\tprivate optionsValidator(options: any): string {\r\n\t\ttry{\r\n\t\t\tconst keys = Object.keys(options);\r\n\t\t\t// make sure COLUMNS exist\r\n\t\t\tif (!keys.includes(\"COLUMNS\")) {\r\n\t\t\t\tthrow new InsightError(\"OPTIONS missing COLUMNS\");\r\n\t\t\t}\r\n\r\n\t\t\t// make sure nothing weird is in the mix of COLUMNS and ORDER\r\n\t\t\tfor (let key of keys) {\r\n\t\t\t\tif (key !== \"COLUMNS\" && key !== \"ORDER\") {\r\n\t\t\t\t\tthrow new InsightError(\"Invalid keys in OPTIONS\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// make sure COLUMNS is an array and has at least one value\r\n\t\t\tif (!Array.isArray(options.COLUMNS) || options.COLUMNS.length === 0) {\r\n\t\t\t\tthrow new InsightError(\"COLUMNS must be a non-empty array\");\r\n\t\t\t}\r\n\r\n\t\t\tconst id = this.getIdFromOptions(options);\r\n\t\t\tconst validColumns: string[] = this.columnsValidator(options.COLUMNS, id);\r\n\t\t\t// ORDER is optional, it can exist or not exist\r\n\t\t\tif (options.ORDER){\r\n\t\t\t\tif (typeof options.ORDER !== \"string\") {\r\n\t\t\t\t\tthrow new InsightError(\"Invalid ORDER type\");\r\n\t\t\t\t}\r\n\t\t\t\tthis.validateOrder(options.ORDER, validColumns, id);\r\n\t\t\t}\r\n\r\n\t\t\treturn id;\r\n\t\t} catch (error){\r\n\t\t\tthrow new InsightError(\"Incorrect format of OPTIONS\");\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getIdFromOptions(options: any): string {\r\n\t\tconst columns = options.COLUMNS;\r\n\t\tconst firstColumn = columns[0];\r\n\t\tif (typeof firstColumn === \"string\" && firstColumn.includes(\"_\")) {\r\n\t\t\treturn firstColumn.split(\"_\")[0];  // Split the string and get the id\r\n\t\t}\r\n\t\tthrow new InsightError(\"Invalid dataset id\");\r\n\t}\r\n\r\n\tprivate columnsValidator(columns: any[], id: string): string[] {\r\n\t\tfor (let column of columns) {\r\n\t\t\tif (typeof column !== \"string\") {\r\n\t\t\t\tthrow new InsightError(\"Invalid type of COLUMN key\");\r\n\t\t\t}\r\n\t\t\tif(!this.fieldValidator(column, id, this.mfields) && !this.fieldValidator(column, id, this.sfields)) {\r\n\t\t\t\tthrow new InsightError(\"Invalid COLUMNS field\");\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn columns;\r\n\t}\r\n\r\n\t// pass in \"id_field\", id, and type of field\r\n\t// check if \"id_field\" is valid\r\n\tprivate fieldValidator(field: string, id: string, fields: string[]): boolean {\r\n\t\tconst parts = field.split(\"_\");\r\n\t\tif (parts.length !== 2 || parts[0] !== id) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn fields.includes(parts[1]);\r\n\t}\r\n\r\n\tprivate validateOrder(order: string, validColumns: string[], id: string) {\r\n\t\tif (typeof order !== \"string\" || !validColumns.includes(order)) {\r\n\t\t\tthrow new InsightError(\"Wrong order or order not included in columns\");\r\n\t\t}\r\n\t}\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e43694b3ff9dd452c1daf59d42358ef5f90c42bb","contentHash":"1b6fadfd29be053a53c76a18a71f065e703a6d9fdd84b6062edb893f383923dc"},"C:\\Users\\karry\\IdeaProjects\\project_team170\\src\\controller\\utilities\\PerformQuery.ts":{"path":"C:\\Users\\karry\\IdeaProjects\\project_team170\\src\\controller\\utilities\\PerformQuery.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":30}},"2":{"start":{"line":4,"column":25},"end":{"line":4,"column":53}},"3":{"start":{"line":6,"column":20},"end":{"line":6,"column":22}},"4":{"start":{"line":8,"column":8},"end":{"line":51,"column":9}},"5":{"start":{"line":9,"column":12},"end":{"line":9,"column":48}},"6":{"start":{"line":10,"column":28},"end":{"line":10,"column":58}},"7":{"start":{"line":11,"column":12},"end":{"line":22,"column":13}},"8":{"start":{"line":12,"column":16},"end":{"line":12,"column":90}},"9":{"start":{"line":14,"column":17},"end":{"line":22,"column":13}},"10":{"start":{"line":15,"column":16},"end":{"line":15,"column":86}},"11":{"start":{"line":17,"column":17},"end":{"line":22,"column":13}},"12":{"start":{"line":18,"column":16},"end":{"line":18,"column":97}},"13":{"start":{"line":20,"column":17},"end":{"line":22,"column":13}},"14":{"start":{"line":21,"column":16},"end":{"line":21,"column":94}},"15":{"start":{"line":23,"column":12},"end":{"line":25,"column":13}},"16":{"start":{"line":24,"column":16},"end":{"line":24,"column":91}},"17":{"start":{"line":26,"column":36},"end":{"line":26,"column":63}},"18":{"start":{"line":27,"column":26},"end":{"line":27,"column":51}},"19":{"start":{"line":28,"column":26},"end":{"line":28,"column":28}},"20":{"start":{"line":29,"column":12},"end":{"line":31,"column":13}},"21":{"start":{"line":30,"column":16},"end":{"line":30,"column":51}},"22":{"start":{"line":32,"column":32},"end":{"line":38,"column":14}},"23":{"start":{"line":33,"column":35},"end":{"line":33,"column":37}},"24":{"start":{"line":34,"column":16},"end":{"line":36,"column":17}},"25":{"start":{"line":35,"column":20},"end":{"line":35,"column":69}},"26":{"start":{"line":37,"column":16},"end":{"line":37,"column":36}},"27":{"start":{"line":39,"column":25},"end":{"line":39,"column":54}},"28":{"start":{"line":40,"column":12},"end":{"line":45,"column":13}},"29":{"start":{"line":41,"column":16},"end":{"line":41,"column":75}},"30":{"start":{"line":44,"column":16},"end":{"line":44,"column":51}},"31":{"start":{"line":46,"column":12},"end":{"line":46,"column":38}},"32":{"start":{"line":49,"column":12},"end":{"line":49,"column":33}},"33":{"start":{"line":50,"column":12},"end":{"line":50,"column":24}},"34":{"start":{"line":54,"column":20},"end":{"line":54,"column":37}},"35":{"start":{"line":55,"column":8},"end":{"line":55,"column":40}},"36":{"start":{"line":58,"column":30},"end":{"line":58,"column":51}},"37":{"start":{"line":59,"column":27},"end":{"line":59,"column":47}},"38":{"start":{"line":60,"column":8},"end":{"line":62,"column":9}},"39":{"start":{"line":61,"column":12},"end":{"line":61,"column":98}},"40":{"start":{"line":63,"column":22},"end":{"line":63,"column":36}},"41":{"start":{"line":64,"column":8},"end":{"line":110,"column":9}},"42":{"start":{"line":66,"column":16},"end":{"line":82,"column":17}},"43":{"start":{"line":67,"column":41},"end":{"line":67,"column":66}},"44":{"start":{"line":68,"column":38},"end":{"line":68,"column":40}},"45":{"start":{"line":69,"column":20},"end":{"line":80,"column":21}},"46":{"start":{"line":70,"column":24},"end":{"line":70,"column":86}},"47":{"start":{"line":72,"column":25},"end":{"line":80,"column":21}},"48":{"start":{"line":73,"column":24},"end":{"line":73,"column":82}},"49":{"start":{"line":75,"column":25},"end":{"line":80,"column":21}},"50":{"start":{"line":76,"column":24},"end":{"line":76,"column":82}},"51":{"start":{"line":78,"column":25},"end":{"line":80,"column":21}},"52":{"start":{"line":79,"column":24},"end":{"line":79,"column":79}},"53":{"start":{"line":81,"column":20},"end":{"line":81,"column":87}},"54":{"start":{"line":81,"column":57},"end":{"line":81,"column":85}},"55":{"start":{"line":83,"column":16},"end":{"line":83,"column":31}},"56":{"start":{"line":85,"column":38},"end":{"line":85,"column":40}},"57":{"start":{"line":86,"column":16},"end":{"line":106,"column":17}},"58":{"start":{"line":87,"column":41},"end":{"line":87,"column":66}},"59":{"start":{"line":88,"column":38},"end":{"line":88,"column":40}},"60":{"start":{"line":89,"column":20},"end":{"line":100,"column":21}},"61":{"start":{"line":90,"column":24},"end":{"line":90,"column":86}},"62":{"start":{"line":92,"column":25},"end":{"line":100,"column":21}},"63":{"start":{"line":93,"column":24},"end":{"line":93,"column":82}},"64":{"start":{"line":95,"column":25},"end":{"line":100,"column":21}},"65":{"start":{"line":96,"column":24},"end":{"line":96,"column":96}},"66":{"start":{"line":98,"column":25},"end":{"line":100,"column":21}},"67":{"start":{"line":99,"column":24},"end":{"line":99,"column":93}},"68":{"start":{"line":101,"column":20},"end":{"line":105,"column":21}},"69":{"start":{"line":102,"column":24},"end":{"line":104,"column":25}},"70":{"start":{"line":102,"column":70},"end":{"line":102,"column":127}},"71":{"start":{"line":103,"column":28},"end":{"line":103,"column":57}},"72":{"start":{"line":107,"column":16},"end":{"line":107,"column":39}},"73":{"start":{"line":109,"column":21},"end":{"line":109,"column":88}},"74":{"start":{"line":113,"column":27},"end":{"line":113,"column":44}},"75":{"start":{"line":114,"column":28},"end":{"line":114,"column":57}},"76":{"start":{"line":115,"column":20},"end":{"line":115,"column":45}},"77":{"start":{"line":116,"column":22},"end":{"line":116,"column":48}},"78":{"start":{"line":117,"column":22},"end":{"line":117,"column":36}},"79":{"start":{"line":118,"column":8},"end":{"line":130,"column":9}},"80":{"start":{"line":120,"column":16},"end":{"line":120,"column":76}},"81":{"start":{"line":120,"column":54},"end":{"line":120,"column":74}},"82":{"start":{"line":121,"column":16},"end":{"line":121,"column":22}},"83":{"start":{"line":123,"column":16},"end":{"line":123,"column":76}},"84":{"start":{"line":123,"column":54},"end":{"line":123,"column":74}},"85":{"start":{"line":124,"column":16},"end":{"line":124,"column":22}},"86":{"start":{"line":126,"column":16},"end":{"line":126,"column":78}},"87":{"start":{"line":126,"column":54},"end":{"line":126,"column":76}},"88":{"start":{"line":127,"column":16},"end":{"line":127,"column":22}},"89":{"start":{"line":129,"column":16},"end":{"line":129,"column":80}},"90":{"start":{"line":131,"column":8},"end":{"line":131,"column":23}},"91":{"start":{"line":134,"column":29},"end":{"line":134,"column":46}},"92":{"start":{"line":135,"column":21},"end":{"line":135,"column":47}},"93":{"start":{"line":136,"column":20},"end":{"line":136,"column":35}},"94":{"start":{"line":137,"column":22},"end":{"line":137,"column":36}},"95":{"start":{"line":138,"column":8},"end":{"line":140,"column":9}},"96":{"start":{"line":139,"column":12},"end":{"line":139,"column":49}},"97":{"start":{"line":141,"column":8},"end":{"line":143,"column":9}},"98":{"start":{"line":142,"column":12},"end":{"line":142,"column":77}},"99":{"start":{"line":144,"column":8},"end":{"line":158,"column":9}},"100":{"start":{"line":145,"column":12},"end":{"line":145,"column":57}},"101":{"start":{"line":146,"column":12},"end":{"line":146,"column":81}},"102":{"start":{"line":146,"column":50},"end":{"line":146,"column":79}},"103":{"start":{"line":148,"column":13},"end":{"line":158,"column":9}},"104":{"start":{"line":149,"column":12},"end":{"line":149,"column":39}},"105":{"start":{"line":150,"column":12},"end":{"line":150,"column":81}},"106":{"start":{"line":150,"column":50},"end":{"line":150,"column":79}},"107":{"start":{"line":152,"column":13},"end":{"line":158,"column":9}},"108":{"start":{"line":153,"column":12},"end":{"line":153,"column":57}},"109":{"start":{"line":154,"column":12},"end":{"line":154,"column":83}},"110":{"start":{"line":154,"column":50},"end":{"line":154,"column":81}},"111":{"start":{"line":157,"column":12},"end":{"line":157,"column":75}},"112":{"start":{"line":157,"column":50},"end":{"line":157,"column":73}},"113":{"start":{"line":159,"column":8},"end":{"line":159,"column":23}},"114":{"start":{"line":162,"column":30},"end":{"line":162,"column":32}},"115":{"start":{"line":163,"column":28},"end":{"line":163,"column":52}},"116":{"start":{"line":164,"column":8},"end":{"line":175,"column":9}},"117":{"start":{"line":165,"column":12},"end":{"line":165,"column":77}},"118":{"start":{"line":167,"column":13},"end":{"line":175,"column":9}},"119":{"start":{"line":168,"column":12},"end":{"line":168,"column":73}},"120":{"start":{"line":170,"column":13},"end":{"line":175,"column":9}},"121":{"start":{"line":171,"column":12},"end":{"line":171,"column":86}},"122":{"start":{"line":173,"column":13},"end":{"line":175,"column":9}},"123":{"start":{"line":174,"column":12},"end":{"line":174,"column":83}},"124":{"start":{"line":176,"column":22},"end":{"line":176,"column":36}},"125":{"start":{"line":177,"column":30},"end":{"line":177,"column":83}},"126":{"start":{"line":177,"column":70},"end":{"line":177,"column":81}},"127":{"start":{"line":178,"column":8},"end":{"line":178,"column":80}},"128":{"start":{"line":178,"column":46},"end":{"line":178,"column":78}},"129":{"start":{"line":179,"column":8},"end":{"line":179,"column":23}},"130":{"start":{"line":182,"column":8},"end":{"line":184,"column":9}},"131":{"start":{"line":183,"column":12},"end":{"line":183,"column":32}},"132":{"start":{"line":185,"column":8},"end":{"line":195,"column":11}},"133":{"start":{"line":186,"column":25},"end":{"line":186,"column":33}},"134":{"start":{"line":187,"column":25},"end":{"line":187,"column":33}},"135":{"start":{"line":188,"column":12},"end":{"line":193,"column":13}},"136":{"start":{"line":189,"column":16},"end":{"line":189,"column":41}},"137":{"start":{"line":191,"column":17},"end":{"line":193,"column":13}},"138":{"start":{"line":192,"column":16},"end":{"line":192,"column":52}},"139":{"start":{"line":194,"column":12},"end":{"line":194,"column":81}},"140":{"start":{"line":198,"column":0},"end":{"line":198,"column":36}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":4},"end":{"line":7,"column":5}},"loc":{"start":{"line":7,"column":50},"end":{"line":52,"column":5}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":32,"column":55},"end":{"line":32,"column":56}},"loc":{"start":{"line":32,"column":67},"end":{"line":38,"column":13}},"line":32},"2":{"name":"(anonymous_2)","decl":{"start":{"line":53,"column":4},"end":{"line":53,"column":5}},"loc":{"start":{"line":53,"column":23},"end":{"line":56,"column":5}},"line":53},"3":{"name":"(anonymous_3)","decl":{"start":{"line":57,"column":4},"end":{"line":57,"column":5}},"loc":{"start":{"line":57,"column":43},"end":{"line":111,"column":5}},"line":57},"4":{"name":"(anonymous_4)","decl":{"start":{"line":81,"column":45},"end":{"line":81,"column":46}},"loc":{"start":{"line":81,"column":57},"end":{"line":81,"column":85}},"line":81},"5":{"name":"(anonymous_5)","decl":{"start":{"line":102,"column":50},"end":{"line":102,"column":51}},"loc":{"start":{"line":102,"column":70},"end":{"line":102,"column":127}},"line":102},"6":{"name":"(anonymous_6)","decl":{"start":{"line":112,"column":4},"end":{"line":112,"column":5}},"loc":{"start":{"line":112,"column":35},"end":{"line":132,"column":5}},"line":112},"7":{"name":"(anonymous_7)","decl":{"start":{"line":120,"column":41},"end":{"line":120,"column":42}},"loc":{"start":{"line":120,"column":54},"end":{"line":120,"column":74}},"line":120},"8":{"name":"(anonymous_8)","decl":{"start":{"line":123,"column":41},"end":{"line":123,"column":42}},"loc":{"start":{"line":123,"column":54},"end":{"line":123,"column":74}},"line":123},"9":{"name":"(anonymous_9)","decl":{"start":{"line":126,"column":41},"end":{"line":126,"column":42}},"loc":{"start":{"line":126,"column":54},"end":{"line":126,"column":76}},"line":126},"10":{"name":"(anonymous_10)","decl":{"start":{"line":133,"column":4},"end":{"line":133,"column":5}},"loc":{"start":{"line":133,"column":35},"end":{"line":160,"column":5}},"line":133},"11":{"name":"(anonymous_11)","decl":{"start":{"line":146,"column":37},"end":{"line":146,"column":38}},"loc":{"start":{"line":146,"column":50},"end":{"line":146,"column":79}},"line":146},"12":{"name":"(anonymous_12)","decl":{"start":{"line":150,"column":37},"end":{"line":150,"column":38}},"loc":{"start":{"line":150,"column":50},"end":{"line":150,"column":79}},"line":150},"13":{"name":"(anonymous_13)","decl":{"start":{"line":154,"column":37},"end":{"line":154,"column":38}},"loc":{"start":{"line":154,"column":50},"end":{"line":154,"column":81}},"line":154},"14":{"name":"(anonymous_14)","decl":{"start":{"line":157,"column":37},"end":{"line":157,"column":38}},"loc":{"start":{"line":157,"column":50},"end":{"line":157,"column":73}},"line":157},"15":{"name":"(anonymous_15)","decl":{"start":{"line":161,"column":4},"end":{"line":161,"column":5}},"loc":{"start":{"line":161,"column":39},"end":{"line":180,"column":5}},"line":161},"16":{"name":"(anonymous_16)","decl":{"start":{"line":177,"column":58},"end":{"line":177,"column":59}},"loc":{"start":{"line":177,"column":70},"end":{"line":177,"column":81}},"line":177},"17":{"name":"(anonymous_17)","decl":{"start":{"line":178,"column":33},"end":{"line":178,"column":34}},"loc":{"start":{"line":178,"column":46},"end":{"line":178,"column":78}},"line":178},"18":{"name":"(anonymous_18)","decl":{"start":{"line":181,"column":4},"end":{"line":181,"column":5}},"loc":{"start":{"line":181,"column":36},"end":{"line":196,"column":5}},"line":181},"19":{"name":"(anonymous_19)","decl":{"start":{"line":185,"column":33},"end":{"line":185,"column":34}},"loc":{"start":{"line":185,"column":43},"end":{"line":195,"column":9}},"line":185}},"branchMap":{"0":{"loc":{"start":{"line":11,"column":12},"end":{"line":22,"column":13}},"type":"if","locations":[{"start":{"line":11,"column":12},"end":{"line":22,"column":13}},{"start":{"line":11,"column":12},"end":{"line":22,"column":13}}],"line":11},"1":{"loc":{"start":{"line":11,"column":16},"end":{"line":11,"column":57}},"type":"binary-expr","locations":[{"start":{"line":11,"column":16},"end":{"line":11,"column":35}},{"start":{"line":11,"column":39},"end":{"line":11,"column":57}}],"line":11},"2":{"loc":{"start":{"line":14,"column":17},"end":{"line":22,"column":13}},"type":"if","locations":[{"start":{"line":14,"column":17},"end":{"line":22,"column":13}},{"start":{"line":14,"column":17},"end":{"line":22,"column":13}}],"line":14},"3":{"loc":{"start":{"line":14,"column":21},"end":{"line":14,"column":83}},"type":"binary-expr","locations":[{"start":{"line":14,"column":21},"end":{"line":14,"column":39}},{"start":{"line":14,"column":43},"end":{"line":14,"column":61}},{"start":{"line":14,"column":65},"end":{"line":14,"column":83}}],"line":14},"4":{"loc":{"start":{"line":17,"column":17},"end":{"line":22,"column":13}},"type":"if","locations":[{"start":{"line":17,"column":17},"end":{"line":22,"column":13}},{"start":{"line":17,"column":17},"end":{"line":22,"column":13}}],"line":17},"5":{"loc":{"start":{"line":20,"column":17},"end":{"line":22,"column":13}},"type":"if","locations":[{"start":{"line":20,"column":17},"end":{"line":22,"column":13}},{"start":{"line":20,"column":17},"end":{"line":22,"column":13}}],"line":20},"6":{"loc":{"start":{"line":23,"column":12},"end":{"line":25,"column":13}},"type":"if","locations":[{"start":{"line":23,"column":12},"end":{"line":25,"column":13}},{"start":{"line":23,"column":12},"end":{"line":25,"column":13}}],"line":23},"7":{"loc":{"start":{"line":40,"column":12},"end":{"line":45,"column":13}},"type":"if","locations":[{"start":{"line":40,"column":12},"end":{"line":45,"column":13}},{"start":{"line":40,"column":12},"end":{"line":45,"column":13}}],"line":40},"8":{"loc":{"start":{"line":60,"column":8},"end":{"line":62,"column":9}},"type":"if","locations":[{"start":{"line":60,"column":8},"end":{"line":62,"column":9}},{"start":{"line":60,"column":8},"end":{"line":62,"column":9}}],"line":60},"9":{"loc":{"start":{"line":64,"column":8},"end":{"line":110,"column":9}},"type":"switch","locations":[{"start":{"line":65,"column":12},"end":{"line":83,"column":31}},{"start":{"line":84,"column":12},"end":{"line":108,"column":13}},{"start":{"line":109,"column":12},"end":{"line":109,"column":88}}],"line":64},"10":{"loc":{"start":{"line":69,"column":20},"end":{"line":80,"column":21}},"type":"if","locations":[{"start":{"line":69,"column":20},"end":{"line":80,"column":21}},{"start":{"line":69,"column":20},"end":{"line":80,"column":21}}],"line":69},"11":{"loc":{"start":{"line":69,"column":24},"end":{"line":69,"column":71}},"type":"binary-expr","locations":[{"start":{"line":69,"column":24},"end":{"line":69,"column":46}},{"start":{"line":69,"column":50},"end":{"line":69,"column":71}}],"line":69},"12":{"loc":{"start":{"line":72,"column":25},"end":{"line":80,"column":21}},"type":"if","locations":[{"start":{"line":72,"column":25},"end":{"line":80,"column":21}},{"start":{"line":72,"column":25},"end":{"line":80,"column":21}}],"line":72},"13":{"loc":{"start":{"line":72,"column":29},"end":{"line":72,"column":100}},"type":"binary-expr","locations":[{"start":{"line":72,"column":29},"end":{"line":72,"column":50}},{"start":{"line":72,"column":54},"end":{"line":72,"column":75}},{"start":{"line":72,"column":79},"end":{"line":72,"column":100}}],"line":72},"14":{"loc":{"start":{"line":75,"column":25},"end":{"line":80,"column":21}},"type":"if","locations":[{"start":{"line":75,"column":25},"end":{"line":80,"column":21}},{"start":{"line":75,"column":25},"end":{"line":80,"column":21}}],"line":75},"15":{"loc":{"start":{"line":78,"column":25},"end":{"line":80,"column":21}},"type":"if","locations":[{"start":{"line":78,"column":25},"end":{"line":80,"column":21}},{"start":{"line":78,"column":25},"end":{"line":80,"column":21}}],"line":78},"16":{"loc":{"start":{"line":89,"column":20},"end":{"line":100,"column":21}},"type":"if","locations":[{"start":{"line":89,"column":20},"end":{"line":100,"column":21}},{"start":{"line":89,"column":20},"end":{"line":100,"column":21}}],"line":89},"17":{"loc":{"start":{"line":89,"column":24},"end":{"line":89,"column":71}},"type":"binary-expr","locations":[{"start":{"line":89,"column":24},"end":{"line":89,"column":46}},{"start":{"line":89,"column":50},"end":{"line":89,"column":71}}],"line":89},"18":{"loc":{"start":{"line":92,"column":25},"end":{"line":100,"column":21}},"type":"if","locations":[{"start":{"line":92,"column":25},"end":{"line":100,"column":21}},{"start":{"line":92,"column":25},"end":{"line":100,"column":21}}],"line":92},"19":{"loc":{"start":{"line":92,"column":29},"end":{"line":92,"column":100}},"type":"binary-expr","locations":[{"start":{"line":92,"column":29},"end":{"line":92,"column":50}},{"start":{"line":92,"column":54},"end":{"line":92,"column":75}},{"start":{"line":92,"column":79},"end":{"line":92,"column":100}}],"line":92},"20":{"loc":{"start":{"line":95,"column":25},"end":{"line":100,"column":21}},"type":"if","locations":[{"start":{"line":95,"column":25},"end":{"line":100,"column":21}},{"start":{"line":95,"column":25},"end":{"line":100,"column":21}}],"line":95},"21":{"loc":{"start":{"line":98,"column":25},"end":{"line":100,"column":21}},"type":"if","locations":[{"start":{"line":98,"column":25},"end":{"line":100,"column":21}},{"start":{"line":98,"column":25},"end":{"line":100,"column":21}}],"line":98},"22":{"loc":{"start":{"line":102,"column":24},"end":{"line":104,"column":25}},"type":"if","locations":[{"start":{"line":102,"column":24},"end":{"line":104,"column":25}},{"start":{"line":102,"column":24},"end":{"line":104,"column":25}}],"line":102},"23":{"loc":{"start":{"line":118,"column":8},"end":{"line":130,"column":9}},"type":"switch","locations":[{"start":{"line":119,"column":12},"end":{"line":121,"column":22}},{"start":{"line":122,"column":12},"end":{"line":124,"column":22}},{"start":{"line":125,"column":12},"end":{"line":127,"column":22}},{"start":{"line":128,"column":12},"end":{"line":129,"column":80}}],"line":118},"24":{"loc":{"start":{"line":138,"column":8},"end":{"line":140,"column":9}},"type":"if","locations":[{"start":{"line":138,"column":8},"end":{"line":140,"column":9}},{"start":{"line":138,"column":8},"end":{"line":140,"column":9}}],"line":138},"25":{"loc":{"start":{"line":138,"column":12},"end":{"line":138,"column":55}},"type":"binary-expr","locations":[{"start":{"line":138,"column":12},"end":{"line":138,"column":37}},{"start":{"line":138,"column":41},"end":{"line":138,"column":55}}],"line":138},"26":{"loc":{"start":{"line":141,"column":8},"end":{"line":143,"column":9}},"type":"if","locations":[{"start":{"line":141,"column":8},"end":{"line":143,"column":9}},{"start":{"line":141,"column":8},"end":{"line":143,"column":9}}],"line":141},"27":{"loc":{"start":{"line":144,"column":8},"end":{"line":158,"column":9}},"type":"if","locations":[{"start":{"line":144,"column":8},"end":{"line":158,"column":9}},{"start":{"line":144,"column":8},"end":{"line":158,"column":9}}],"line":144},"28":{"loc":{"start":{"line":144,"column":12},"end":{"line":144,"column":62}},"type":"binary-expr","locations":[{"start":{"line":144,"column":12},"end":{"line":144,"column":39}},{"start":{"line":144,"column":43},"end":{"line":144,"column":62}}],"line":144},"29":{"loc":{"start":{"line":148,"column":13},"end":{"line":158,"column":9}},"type":"if","locations":[{"start":{"line":148,"column":13},"end":{"line":158,"column":9}},{"start":{"line":148,"column":13},"end":{"line":158,"column":9}}],"line":148},"30":{"loc":{"start":{"line":152,"column":13},"end":{"line":158,"column":9}},"type":"if","locations":[{"start":{"line":152,"column":13},"end":{"line":158,"column":9}},{"start":{"line":152,"column":13},"end":{"line":158,"column":9}}],"line":152},"31":{"loc":{"start":{"line":164,"column":8},"end":{"line":175,"column":9}},"type":"if","locations":[{"start":{"line":164,"column":8},"end":{"line":175,"column":9}},{"start":{"line":164,"column":8},"end":{"line":175,"column":9}}],"line":164},"32":{"loc":{"start":{"line":164,"column":12},"end":{"line":164,"column":57}},"type":"binary-expr","locations":[{"start":{"line":164,"column":12},"end":{"line":164,"column":33}},{"start":{"line":164,"column":37},"end":{"line":164,"column":57}}],"line":164},"33":{"loc":{"start":{"line":167,"column":13},"end":{"line":175,"column":9}},"type":"if","locations":[{"start":{"line":167,"column":13},"end":{"line":175,"column":9}},{"start":{"line":167,"column":13},"end":{"line":175,"column":9}}],"line":167},"34":{"loc":{"start":{"line":167,"column":17},"end":{"line":167,"column":85}},"type":"binary-expr","locations":[{"start":{"line":167,"column":17},"end":{"line":167,"column":37}},{"start":{"line":167,"column":41},"end":{"line":167,"column":61}},{"start":{"line":167,"column":65},"end":{"line":167,"column":85}}],"line":167},"35":{"loc":{"start":{"line":170,"column":13},"end":{"line":175,"column":9}},"type":"if","locations":[{"start":{"line":170,"column":13},"end":{"line":175,"column":9}},{"start":{"line":170,"column":13},"end":{"line":175,"column":9}}],"line":170},"36":{"loc":{"start":{"line":173,"column":13},"end":{"line":175,"column":9}},"type":"if","locations":[{"start":{"line":173,"column":13},"end":{"line":175,"column":9}},{"start":{"line":173,"column":13},"end":{"line":175,"column":9}}],"line":173},"37":{"loc":{"start":{"line":182,"column":8},"end":{"line":184,"column":9}},"type":"if","locations":[{"start":{"line":182,"column":8},"end":{"line":184,"column":9}},{"start":{"line":182,"column":8},"end":{"line":184,"column":9}}],"line":182},"38":{"loc":{"start":{"line":182,"column":12},"end":{"line":182,"column":40}},"type":"binary-expr","locations":[{"start":{"line":182,"column":12},"end":{"line":182,"column":18}},{"start":{"line":182,"column":22},"end":{"line":182,"column":40}}],"line":182},"39":{"loc":{"start":{"line":188,"column":12},"end":{"line":193,"column":13}},"type":"if","locations":[{"start":{"line":188,"column":12},"end":{"line":193,"column":13}},{"start":{"line":188,"column":12},"end":{"line":193,"column":13}}],"line":188},"40":{"loc":{"start":{"line":188,"column":16},"end":{"line":188,"column":72}},"type":"binary-expr","locations":[{"start":{"line":188,"column":16},"end":{"line":188,"column":42}},{"start":{"line":188,"column":46},"end":{"line":188,"column":72}}],"line":188},"41":{"loc":{"start":{"line":191,"column":17},"end":{"line":193,"column":13}},"type":"if","locations":[{"start":{"line":191,"column":17},"end":{"line":193,"column":13}},{"start":{"line":191,"column":17},"end":{"line":193,"column":13}}],"line":191},"42":{"loc":{"start":{"line":191,"column":21},"end":{"line":191,"column":77}},"type":"binary-expr","locations":[{"start":{"line":191,"column":21},"end":{"line":191,"column":47}},{"start":{"line":191,"column":51},"end":{"line":191,"column":77}}],"line":191}},"s":{"0":1,"1":1,"2":1,"3":24,"4":24,"5":24,"6":24,"7":24,"8":10,"9":14,"10":11,"11":3,"12":2,"13":1,"14":1,"15":19,"16":2,"17":17,"18":17,"19":17,"20":17,"21":57,"22":17,"23":4818,"24":4818,"25":14146,"26":4818,"27":17,"28":17,"29":11,"30":6,"31":17,"32":7,"33":7,"34":57,"35":57,"36":12,"37":12,"38":12,"39":0,"40":12,"41":12,"42":7,"43":12,"44":12,"45":12,"46":0,"47":12,"48":5,"49":7,"50":7,"51":0,"52":0,"53":9,"54":264800,"55":4,"56":5,"57":5,"58":10,"59":10,"60":10,"61":2,"62":8,"63":4,"64":4,"65":4,"66":0,"67":0,"68":9,"69":1959,"70":1754144,"71":1954,"72":4,"73":0,"74":21,"75":21,"76":21,"77":21,"78":21,"79":21,"80":11,"81":710732,"82":11,"83":5,"84":323060,"85":5,"86":5,"87":323060,"88":5,"89":0,"90":21,"91":13,"92":13,"93":13,"94":13,"95":13,"96":7,"97":13,"98":0,"99":13,"100":0,"101":0,"102":0,"103":13,"104":0,"105":0,"106":0,"107":13,"108":7,"109":7,"110":129229,"111":6,"112":387672,"113":8,"114":1,"115":1,"116":1,"117":0,"118":1,"119":1,"120":0,"121":0,"122":0,"123":0,"124":1,"125":1,"126":64560,"127":1,"128":64612,"129":1,"130":11,"131":0,"132":11,"133":25079,"134":25079,"135":25079,"136":25079,"137":0,"138":0,"139":0,"140":1},"f":{"0":24,"1":4818,"2":57,"3":12,"4":264800,"5":1754144,"6":21,"7":710732,"8":323060,"9":323060,"10":13,"11":0,"12":0,"13":129229,"14":387672,"15":1,"16":64560,"17":64612,"18":11,"19":25079},"b":{"0":[10,14],"1":[24,19],"2":[11,3],"3":[14,11,5],"4":[2,1],"5":[1,0],"6":[2,17],"7":[11,6],"8":[0,12],"9":[7,5,0],"10":[0,12],"11":[12,12],"12":[5,7],"13":[12,11,7],"14":[7,0],"15":[0,0],"16":[2,8],"17":[10,8],"18":[4,4],"19":[8,8,7],"20":[4,0],"21":[0,0],"22":[1954,5],"23":[11,5,5,0],"24":[7,6],"25":[13,7],"26":[0,13],"27":[0,13],"28":[13,0],"29":[0,13],"30":[7,6],"31":[0,1],"32":[1,1],"33":[1,0],"34":[1,0,0],"35":[0,0],"36":[0,0],"37":[0,11],"38":[11,11],"39":[25079,0],"40":[25079,25079],"41":[0,0],"42":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/karry/IdeaProjects/project_team170/src/controller/utilities/PerformQuery.ts","sources":["C:/Users/karry/IdeaProjects/project_team170/src/controller/utilities/PerformQuery.ts"],"names":[],"mappings":"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","sourcesContent":["import {InsightError, InsightResult, ResultTooLargeError} from \"../IInsightFacade\";\r\n\r\nexport class PerformQuery{\r\n\tpublic insightResult: InsightResult[] = [];\r\n\r\n\tpublic performQueryHelper(query: any, datasetContent: any[], id: string): InsightResult[]{\r\n\t\ttry {\r\n\t\t\tthis.insightResult = datasetContent;\r\n\t\t\tlet filterKey = Object.keys(query[\"WHERE\"])[0];\r\n\t\t\tif (filterKey === \"AND\" || filterKey === \"OR\"){\r\n\t\t\t\tthis.insightResult = this.logicComparison(query[\"WHERE\"], datasetContent);\r\n\t\t\t} else if (filterKey === \"LT\" || filterKey === \"GT\" || filterKey === \"EQ\"){\r\n\t\t\t\tthis.insightResult = this.mComparison(query[\"WHERE\"], datasetContent);\r\n\t\t\t} else if (filterKey === \"IS\"){\r\n\t\t\t\tthis.insightResult = this.sComparison(query[\"WHERE\"][filterKey], datasetContent);\r\n\t\t\t} else if (filterKey === \"NOT\"){\r\n\t\t\t\tthis.insightResult = this.negation(query[\"WHERE\"][filterKey], datasetContent);\r\n\t\t\t}\r\n\r\n\t\t\tif (this.insightResult.length > 5000) {\r\n\t\t\t\tthrow new ResultTooLargeError(\"The result is too large.\");\r\n\t\t\t}\r\n\r\n\t\t\tconst columnsOriginal = query[\"OPTIONS\"][\"COLUMNS\"];\r\n\t\t\tconst order = query[\"OPTIONS\"][\"ORDER\"];\r\n\t\t\tlet columns: string[] = [];\r\n\t\t\tfor (const col of columnsOriginal) {\r\n\t\t\t\tcolumns.push(this.splitField(col));\r\n\t\t\t}\r\n\r\n\t\t\tlet optionsResult = this.insightResult.map((result) => {\r\n\t\t\t\tlet columnResult: InsightResult = {};\r\n\t\t\t\tfor (let column of columns){\r\n\t\t\t\t\tcolumnResult[id + \"_\" + column] = result[column];\r\n\t\t\t\t}\r\n\t\t\t\treturn columnResult;\r\n\t\t\t});\r\n\r\n\t\t\tconst keys = Object.keys(query[\"OPTIONS\"]);\r\n\t\t\tif (keys.includes(\"ORDER\")) {\r\n\t\t\t\tthis.insightResult = this.orderQuery(optionsResult, order);\r\n\t\t\t} else {\r\n\t\t\t\tthis.insightResult = optionsResult;\r\n\t\t\t}\r\n\r\n\t\t\treturn this.insightResult;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\tthrow error;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate splitField (column: string): string {\r\n\t\tlet parts = column.split(\"_\");\r\n\t\treturn parts.slice(1).join(\"_\");\r\n\t}\r\n\r\n\tprivate logicComparison(logic: any, datasetContent: any[]): InsightResult[]{\r\n\t\tconst logicOperator: string = Object.keys(logic)[0];\r\n\t\tconst conditions = logic[logicOperator];\r\n\t\tif (conditions.length === 0){\r\n\t\t\tthrow new InsightError(\"No conditions provided for logic operator.\");\r\n\t\t}\r\n\t\tlet results: InsightResult[] = datasetContent;\r\n\t\tswitch (logicOperator){\r\n\t\t\tcase \"AND\":\r\n\t\t\t\tfor (let condition of conditions) {\r\n\t\t\t\t\tconst conditionKey = Object.keys(condition)[0];\r\n\t\t\t\t\tlet tempResults: InsightResult[] = [];\r\n\t\t\t\t\tif (conditionKey === \"AND\" || conditionKey === \"OR\") {\r\n\t\t\t\t\t\ttempResults = this.logicComparison(condition, datasetContent);\r\n\t\t\t\t\t} else if (conditionKey === \"LT\" || conditionKey === \"GT\" || conditionKey === \"EQ\") {\r\n\t\t\t\t\t\ttempResults = this.mComparison(condition, datasetContent);\r\n\t\t\t\t\t} else if (conditionKey === \"IS\") {\r\n\t\t\t\t\t\ttempResults = this.sComparison(condition, datasetContent);\r\n\t\t\t\t\t} else if (conditionKey === \"NOT\") {\r\n\t\t\t\t\t\ttempResults = this.negation(condition, datasetContent);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Intersect results with tempResults\r\n\t\t\t\t\tresults = results.filter((result) => tempResults.includes(result));\r\n\t\t\t\t}\r\n\t\t\t\treturn results;\r\n\t\t\tcase \"OR\": {\r\n\t\t\t\tlet combinedResults: InsightResult[] = [];\r\n\t\t\t\tfor (let condition of conditions) {\r\n\t\t\t\t\tconst conditionKey = Object.keys(condition)[0];\r\n\t\t\t\t\tlet tempResults: InsightResult[] = [];\r\n\t\t\t\t\tif (conditionKey === \"AND\" || conditionKey === \"OR\") {\r\n\t\t\t\t\t\ttempResults = this.logicComparison(condition, datasetContent);\r\n\t\t\t\t\t} else if (conditionKey === \"LT\" || conditionKey === \"GT\" || conditionKey === \"EQ\") {\r\n\t\t\t\t\t\ttempResults = this.mComparison(condition, datasetContent);\r\n\t\t\t\t\t} else if (conditionKey === \"IS\") {\r\n\t\t\t\t\t\ttempResults = this.sComparison(condition[conditionKey], datasetContent);\r\n\t\t\t\t\t} else if (conditionKey === \"NOT\") {\r\n\t\t\t\t\t\ttempResults = this.negation(condition[conditionKey], datasetContent);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (let result of tempResults) {\r\n\t\t\t\t\t\tif (!combinedResults.some((combinedResult) =>\r\n\t\t\t\t\t\t\tJSON.stringify(combinedResult) === JSON.stringify(result))) {\r\n\t\t\t\t\t\t\tcombinedResults.push(result);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} return combinedResults;\r\n\t\t\t}\r\n\t\t\tdefault: throw new InsightError(\"Invalid logic operator.\");\r\n\t\t}\r\n\t}\r\n\r\n\tprivate mComparison(m: any, datasetContent: any[]): InsightResult[]{\r\n\t\tconst comparator: string = Object.keys(m)[0];\r\n\t\tconst keyOriginal: string = Object.keys(m[comparator])[0]; // \"id_field\"\r\n\t\tconst key: string = keyOriginal.split(\"_\")[1]; // \"field\"\r\n\t\tconst value: number = m[comparator][keyOriginal];\r\n\t\tlet results: InsightResult[] = datasetContent;\r\n\r\n\t\tswitch (comparator) {\r\n\t\t\tcase \"GT\":\r\n\t\t\t\tresults = results.filter((section) => section[key] > value);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"LT\":\r\n\t\t\t\tresults = results.filter((section) => section[key] < value);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"EQ\":\r\n\t\t\t\tresults = results.filter((section) => section[key] === value);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new InsightError(\"Invalid M COMPARATOR\");\r\n\t\t}\r\n\t\treturn results;\r\n\t}\r\n\r\n\tprivate sComparison(s: any, datasetContent: any[]): InsightResult[]{\r\n\t\tconst sKeyOriginal: string = Object.keys(s)[0]; // \"id_field\"\r\n\t\tconst sKey: string = sKeyOriginal.split(\"_\")[1]; // \"field\"\r\n\t\tlet value: any = s[sKeyOriginal];\r\n\t\tlet results: InsightResult[] = datasetContent;\r\n\r\n\t\tif (typeof value === \"object\" && value !== null) {\r\n\t\t\tvalue = value[Object.keys(value)[0]];\r\n\t\t}\r\n\r\n\t\tif (typeof value !== \"string\") {\r\n\t\t\tconsole.error(\"Expected a string but got:\", typeof value, value);\r\n\t\t}\r\n\r\n\r\n\t\tif (value.startsWith(\"*\") === 0 && value.endsWith(\"*\")) {\r\n\t\t\tvalue = value.substring(1, value.length - 1);\r\n\t\t\tresults = results.filter((section) => (section[sKey] as string).includes(value));\r\n\t\t} else if (value.startsWith(\"*\") === 0) {\r\n\t\t\tvalue = value.substring(1);\r\n\t\t\tresults = results.filter((section) => (section[sKey] as string).endsWith(value));\r\n\t\t} else if (value.endsWith(\"*\")) {\r\n\t\t\tvalue = value.substring(0, value.length - 1);\r\n\t\t\tresults = results.filter((section) => (section[sKey] as string).startsWith(value));\r\n\t\t} else {\r\n\t\t\tresults = results.filter((section) => section[sKey] === value);\r\n\t\t}\r\n\r\n\t\treturn results;\r\n\t}\r\n\r\n\tprivate negation(negation: any, datasetContent: any[]): InsightResult[]{\r\n\t\tlet negationResults: InsightResult[] = [];\r\n\t\tconst negationKey = Object.keys(negation)[0];\r\n\r\n\t\tif (negationKey === \"AND\" || negationKey === \"OR\"){\r\n\t\t\tnegationResults = this.logicComparison(negation, datasetContent);\r\n\t\t} else if (negationKey === \"LT\" || negationKey === \"GT\" || negationKey === \"EQ\"){\r\n\t\t\tnegationResults = this.mComparison(negation, datasetContent);\r\n\t\t} else if (negationKey === \"IS\"){\r\n\t\t\tnegationResults = this.sComparison(negation[negationKey], datasetContent);\r\n\t\t} else if (negationKey === \"NOT\"){\r\n\t\t\tnegationResults = this.negation(negation[negationKey], datasetContent);\r\n\t\t}\r\n\r\n\t\t// I cannot think of a case where this is not valid TODO: please verify\r\n\t\tlet results: InsightResult[] = datasetContent;\r\n\t\tconst negationUUIDs = new Set(negationResults.map((result) => result.uuid));\r\n\t\tresults = results.filter((section) => !negationUUIDs.has(section.uuid));\r\n\t\treturn results;\r\n\t}\r\n\r\n\tprivate orderQuery(orderDataset: InsightResult[], order: any): InsightResult[]{\r\n\t\tif (!order || order.length === 0) {\r\n\t\t\treturn orderDataset;\r\n\t\t}\r\n\t\treturn orderDataset.sort((a: any, b: any) => {\r\n\t\t\tlet aValue = a[order];\r\n\t\t\tlet bValue = b[order];\r\n\t\t\tif (typeof aValue === \"number\" && typeof bValue === \"number\") {\r\n\t\t\t\treturn (aValue - bValue);\r\n\t\t\t} else if (typeof aValue === \"string\" && typeof bValue === \"string\") {\r\n\t\t\t\treturn aValue.localeCompare(bValue);\r\n\t\t\t}\r\n\t\t\tthrow new InsightError(\"Wrong type for order key.\");\r\n\t\t});\r\n\t}\r\n}\r\n\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b960198a82814f1ab8e0531b32562b37d79c1e43","contentHash":"93a758d18793c8de582d16748d651dc3bba95188fdf039f5282ae173c0ad4d38"}}